<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1135.8px" preserveAspectRatio="none" style="width:2467px;height:1135px;" version="1.1" viewBox="0 0 2467 1135" width="2467.8px" zoomAndPan="magnify"><defs><filter height="300%" id="fthzebkdgotxr" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="1.2"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="2.4" dy="2.4" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="1018.7719" style="stroke:#A80036;stroke-width:0.6;" width="6" x="21.6" y="59.7656"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="18.2109" style="stroke:#A80036;stroke-width:0.6;" width="6" x="229.8" y="95.9906"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="441.0516" style="stroke:#A80036;stroke-width:0.6;" width="6" x="229.8" y="132.4125"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="481.4625" style="stroke:#A80036;stroke-width:0.6;" width="6" x="229.8" y="591.675"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="385.2188" style="stroke:#A80036;stroke-width:0.6;" width="6" x="420" y="150.6234"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="440.8406" style="stroke:#A80036;stroke-width:0.6;" width="6" x="420" y="614.0859"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="367.0078" style="stroke:#A80036;stroke-width:0.6;" width="6" x="618" y="168.8344"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="422.6297" style="stroke:#A80036;stroke-width:0.6;" width="6" x="618" y="632.2969"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="348.7969" style="stroke:#A80036;stroke-width:0.6;" width="6" x="816" y="187.0453"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="404.4188" style="stroke:#A80036;stroke-width:0.6;" width="6" x="816" y="650.5078"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="54.6328" style="stroke:#A80036;stroke-width:0.6;" width="6" x="1135.2" y="205.2563"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="54.6328" style="stroke:#A80036;stroke-width:0.6;" width="6" x="1135.2" y="668.7188"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="18.2109" style="stroke:#A80036;stroke-width:0.6;" width="6" x="1501.2" y="223.4672"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="218.5313" style="stroke:#A80036;stroke-width:0.6;" width="6" x="1501.2" y="317.3109"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="18.2109" style="stroke:#A80036;stroke-width:0.6;" width="6" x="1501.2" y="686.9297"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="274.1531" style="stroke:#A80036;stroke-width:0.6;" width="6" x="1501.2" y="780.7734"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="200.3203" style="stroke:#A80036;stroke-width:0.6;" width="6" x="1722.6" y="335.5219"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="255.9422" style="stroke:#A80036;stroke-width:0.6;" width="6" x="1722.6" y="798.9844"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="18.2109" style="stroke:#A80036;stroke-width:0.6;" width="6" x="1918.2" y="905.25"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="18.2109" style="stroke:#A80036;stroke-width:0.6;" width="6" x="2185.8" y="353.7328"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="18.2109" style="stroke:#A80036;stroke-width:0.6;" width="6" x="2185.8" y="817.1953"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="18.2109" style="stroke:#A80036;stroke-width:0.6;" width="6" x="2315.7" y="426.5766"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="18" style="stroke:#A80036;stroke-width:0.6;" width="6" x="2315.7" y="941.6719"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="18.2109" style="stroke:#A80036;stroke-width:0.6;" width="6" x="2417.4" y="390.1547"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="18.2109" style="stroke:#A80036;stroke-width:0.6;" width="6" x="2417.4" y="853.6172"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="476.6766" style="stroke:#000000;stroke-width:1.2;" width="2453.4" x="6" y="63.9656"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="47.4328" style="stroke:#000000;stroke-width:1.2;" width="282.3" x="6" y="549.0422"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="83.6438" style="stroke:#000000;stroke-width:1.2;" width="709.2" x="1678.2" y="880.8281"/><line style="stroke:#A80036;stroke-width:0.6;stroke-dasharray:5.0,5.0;" x1="24.6" x2="24.6" y1="53.7656" y2="1083.9375"/><line style="stroke:#A80036;stroke-width:0.6;stroke-dasharray:5.0,5.0;" x1="232.5" x2="232.5" y1="53.7656" y2="1083.9375"/><line style="stroke:#A80036;stroke-width:0.6;stroke-dasharray:5.0,5.0;" x1="422.7" x2="422.7" y1="53.7656" y2="1083.9375"/><line style="stroke:#A80036;stroke-width:0.6;stroke-dasharray:5.0,5.0;" x1="621" x2="621" y1="53.7656" y2="1083.9375"/><line style="stroke:#A80036;stroke-width:0.6;stroke-dasharray:5.0,5.0;" x1="819" x2="819" y1="53.7656" y2="1083.9375"/><line style="stroke:#A80036;stroke-width:0.6;stroke-dasharray:5.0,5.0;" x1="1138.2" x2="1138.2" y1="53.7656" y2="1083.9375"/><line style="stroke:#A80036;stroke-width:0.6;stroke-dasharray:5.0,5.0;" x1="1504.2" x2="1504.2" y1="53.7656" y2="1083.9375"/><line style="stroke:#A80036;stroke-width:0.6;stroke-dasharray:5.0,5.0;" x1="1725.6" x2="1725.6" y1="53.7656" y2="1083.9375"/><line style="stroke:#A80036;stroke-width:0.6;stroke-dasharray:5.0,5.0;" x1="1797" x2="1797" y1="53.7656" y2="1083.9375"/><line style="stroke:#A80036;stroke-width:0.6;stroke-dasharray:5.0,5.0;" x1="1858.8" x2="1858.8" y1="53.7656" y2="1083.9375"/><line style="stroke:#A80036;stroke-width:0.6;stroke-dasharray:5.0,5.0;" x1="1921.2" x2="1921.2" y1="53.7656" y2="1083.9375"/><line style="stroke:#A80036;stroke-width:0.6;stroke-dasharray:5.0,5.0;" x1="1993.2" x2="1993.2" y1="53.7656" y2="1083.9375"/><line style="stroke:#A80036;stroke-width:0.6;stroke-dasharray:5.0,5.0;" x1="2081.4" x2="2081.4" y1="53.7656" y2="1083.9375"/><line style="stroke:#A80036;stroke-width:0.6;stroke-dasharray:5.0,5.0;" x1="2188.8" x2="2188.8" y1="53.7656" y2="1083.9375"/><line style="stroke:#A80036;stroke-width:0.6;stroke-dasharray:5.0,5.0;" x1="2318.4" x2="2318.4" y1="53.7656" y2="1083.9375"/><line style="stroke:#A80036;stroke-width:0.6;stroke-dasharray:5.0,5.0;" x1="2420.4" x2="2420.4" y1="53.7656" y2="1083.9375"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="21.6" x="12" y="51.9199">Client</text><ellipse cx="24.6" cy="9" fill="#FEFECE" filter="url(#fthzebkdgotxr)" rx="4.8" ry="4.8" style="stroke:#A80036;stroke-width:1.2;"/><path d="M24.6,13.8 L24.6,30 M16.8,18.6 L32.4,18.6 M24.6,30 L16.8,39 M24.6,30 L32.4,39 " fill="none" filter="url(#fthzebkdgotxr)" style="stroke:#A80036;stroke-width:1.2;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="21.6" x="12" y="1092.0574">Client</text><ellipse cx="24.6" cy="1099.9031" fill="#FEFECE" filter="url(#fthzebkdgotxr)" rx="4.8" ry="4.8" style="stroke:#A80036;stroke-width:1.2;"/><path d="M24.6,1104.7031 L24.6,1120.9031 M16.8,1109.5031 L32.4,1109.5031 M24.6,1120.9031 L16.8,1129.9031 M24.6,1120.9031 L32.4,1129.9031 " fill="none" filter="url(#fthzebkdgotxr)" style="stroke:#A80036;stroke-width:1.2;"/><rect fill="#FEFECE" filter="url(#fthzebkdgotxr)" height="29.5313" style="stroke:#A80036;stroke-width:0.8999999999999999;" width="96.6" x="183.3" y="21.2344"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-style="italic" lengthAdjust="spacing" textLength="57" x="203.1" y="34.1543">«presentation»</text><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="88.2" x="187.5" y="44.7199">AnswerQuestionnaireUI</text><rect fill="#FEFECE" filter="url(#fthzebkdgotxr)" height="29.5313" style="stroke:#A80036;stroke-width:0.8999999999999999;" width="96.6" x="183.3" y="1083.3375"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-style="italic" lengthAdjust="spacing" textLength="57" x="203.1" y="1096.2574">«presentation»</text><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="88.2" x="187.5" y="1106.823">AnswerQuestionnaireUI</text><rect fill="#FEFECE" filter="url(#fthzebkdgotxr)" height="29.5313" style="stroke:#A80036;stroke-width:0.8999999999999999;" width="126.6" x="358.5" y="21.2344"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-style="italic" lengthAdjust="spacing" textLength="50.4" x="396.6" y="34.1543">«application»</text><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="118.2" x="362.7" y="44.7199">AnswerQuestionnaireController</text><rect fill="#FEFECE" filter="url(#fthzebkdgotxr)" height="29.5313" style="stroke:#A80036;stroke-width:0.8999999999999999;" width="126.6" x="358.5" y="1083.3375"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-style="italic" lengthAdjust="spacing" textLength="50.4" x="396.6" y="1096.2574">«application»</text><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="118.2" x="362.7" y="1106.823">AnswerQuestionnaireController</text><rect fill="#FEFECE" filter="url(#fthzebkdgotxr)" height="29.5313" style="stroke:#A80036;stroke-width:0.8999999999999999;" width="117.6" x="561" y="21.2344"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-style="italic" lengthAdjust="spacing" textLength="50.4" x="594.6" y="34.1543">«application»</text><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="109.2" x="565.2" y="44.7199">AnswerQuestionnaireService</text><rect fill="#FEFECE" filter="url(#fthzebkdgotxr)" height="29.5313" style="stroke:#A80036;stroke-width:0.8999999999999999;" width="117.6" x="561" y="1083.3375"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-style="italic" lengthAdjust="spacing" textLength="50.4" x="594.6" y="1096.2574">«application»</text><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="109.2" x="565.2" y="1106.823">AnswerQuestionnaireService</text><rect fill="#FEFECE" filter="url(#fthzebkdgotxr)" height="18.9656" style="stroke:#A80036;stroke-width:0.8999999999999999;" width="57.6" x="789" y="31.8"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="49.2" x="793.2" y="44.7199">TcpOrderSrv</text><rect fill="#FEFECE" filter="url(#fthzebkdgotxr)" height="18.9656" style="stroke:#A80036;stroke-width:0.8999999999999999;" width="57.6" x="789" y="1083.3375"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="49.2" x="793.2" y="1096.2574">TcpOrderSrv</text><rect fill="#FEFECE" filter="url(#fthzebkdgotxr)" height="18.9656" style="stroke:#A80036;stroke-width:0.8999999999999999;" width="115.2" x="1079.4" y="31.8"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="106.8" x="1083.6" y="44.7199">OrderServerMessageParser</text><rect fill="#FEFECE" filter="url(#fthzebkdgotxr)" height="18.9656" style="stroke:#A80036;stroke-width:0.8999999999999999;" width="115.2" x="1079.4" y="1083.3375"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="106.8" x="1083.6" y="1096.2574">OrderServerMessageParser</text><rect fill="#FEFECE" filter="url(#fthzebkdgotxr)" height="18.9656" style="stroke:#A80036;stroke-width:0.8999999999999999;" width="87.6" x="1459.2" y="31.8"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="79.2" x="1463.4" y="44.7199">OrderServerRequest</text><rect fill="#FEFECE" filter="url(#fthzebkdgotxr)" height="18.9656" style="stroke:#A80036;stroke-width:0.8999999999999999;" width="87.6" x="1459.2" y="1083.3375"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="79.2" x="1463.4" y="1096.2574">OrderServerRequest</text><rect fill="#FEFECE" filter="url(#fthzebkdgotxr)" height="29.5313" style="stroke:#A80036;stroke-width:0.8999999999999999;" width="80.4" x="1684.2" y="21.2344"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-style="italic" lengthAdjust="spacing" textLength="50.4" x="1699.2" y="34.1543">«application»</text><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="72" x="1688.4" y="44.7199">OrderSrvController</text><rect fill="#FEFECE" filter="url(#fthzebkdgotxr)" height="29.5313" style="stroke:#A80036;stroke-width:0.8999999999999999;" width="80.4" x="1684.2" y="1083.3375"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-style="italic" lengthAdjust="spacing" textLength="50.4" x="1699.2" y="1096.2574">«application»</text><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="72" x="1688.4" y="1106.823">OrderSrvController</text><rect fill="#FEFECE" filter="url(#fthzebkdgotxr)" height="29.5313" style="stroke:#A80036;stroke-width:0.8999999999999999;" width="45.6" x="1773" y="21.2344"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-style="italic" lengthAdjust="spacing" textLength="37.2" x="1777.2" y="34.1543">«domain»</text><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="21.6" x="1785" y="44.7199">Client</text><rect fill="#FEFECE" filter="url(#fthzebkdgotxr)" height="29.5313" style="stroke:#A80036;stroke-width:0.8999999999999999;" width="45.6" x="1773" y="1083.3375"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-style="italic" lengthAdjust="spacing" textLength="37.2" x="1777.2" y="1096.2574">«domain»</text><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="21.6" x="1785" y="1106.823">Client</text><rect fill="#FEFECE" filter="url(#fthzebkdgotxr)" height="29.5313" style="stroke:#A80036;stroke-width:0.8999999999999999;" width="61.8" x="1827" y="21.2344"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-style="italic" lengthAdjust="spacing" textLength="37.2" x="1839.3" y="34.1543">«domain»</text><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="53.4" x="1831.2" y="44.7199">Questionnaire</text><rect fill="#FEFECE" filter="url(#fthzebkdgotxr)" height="29.5313" style="stroke:#A80036;stroke-width:0.8999999999999999;" width="61.8" x="1827" y="1083.3375"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-style="italic" lengthAdjust="spacing" textLength="37.2" x="1839.3" y="1096.2574">«domain»</text><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="53.4" x="1831.2" y="1106.823">Questionnaire</text><rect fill="#FEFECE" filter="url(#fthzebkdgotxr)" height="29.5313" style="stroke:#A80036;stroke-width:0.8999999999999999;" width="45.6" x="1897.2" y="21.2344"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-style="italic" lengthAdjust="spacing" textLength="37.2" x="1901.4" y="34.1543">«domain»</text><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="27.6" x="1906.2" y="44.7199">Answer</text><rect fill="#FEFECE" filter="url(#fthzebkdgotxr)" height="29.5313" style="stroke:#A80036;stroke-width:0.8999999999999999;" width="45.6" x="1897.2" y="1083.3375"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-style="italic" lengthAdjust="spacing" textLength="37.2" x="1901.4" y="1096.2574">«domain»</text><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="27.6" x="1906.2" y="1106.823">Answer</text><rect fill="#FEFECE" filter="url(#fthzebkdgotxr)" height="29.5313" style="stroke:#A80036;stroke-width:0.8999999999999999;" width="81.6" x="1951.2" y="21.2344"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-style="italic" lengthAdjust="spacing" textLength="53.4" x="1965.3" y="34.1543">«persistence»</text><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="73.2" x="1955.4" y="44.7199">PersistenceContext</text><rect fill="#FEFECE" filter="url(#fthzebkdgotxr)" height="29.5313" style="stroke:#A80036;stroke-width:0.8999999999999999;" width="81.6" x="1951.2" y="1083.3375"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-style="italic" lengthAdjust="spacing" textLength="53.4" x="1965.3" y="1096.2574">«persistence»</text><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="73.2" x="1955.4" y="1106.823">PersistenceContext</text><rect fill="#FEFECE" filter="url(#fthzebkdgotxr)" height="29.5313" style="stroke:#A80036;stroke-width:0.8999999999999999;" width="78" x="2041.2" y="21.2344"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-style="italic" lengthAdjust="spacing" textLength="35.4" x="2062.5" y="34.1543">«factory»</text><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="69.6" x="2045.4" y="44.7199">RepositoryFactory</text><rect fill="#FEFECE" filter="url(#fthzebkdgotxr)" height="29.5313" style="stroke:#A80036;stroke-width:0.8999999999999999;" width="78" x="2041.2" y="1083.3375"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-style="italic" lengthAdjust="spacing" textLength="35.4" x="2062.5" y="1096.2574">«factory»</text><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="69.6" x="2045.4" y="1106.823">RepositoryFactory</text><text fill="#000000" font-family="sans-serif" font-size="8.4" font-style="italic" lengthAdjust="spacing" textLength="47.4" x="2163.3" y="41.3543">«repository»</text><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="118.8" x="2127.6" y="51.9199">SurveyQuestionnareRepository</text><path d="M2178,11.0344 C2178,5.0344 2188.8,5.0344 2188.8,5.0344 C2188.8,5.0344 2199.6,5.0344 2199.6,11.0344 L2199.6,26.6344 C2199.6,32.6344 2188.8,32.6344 2188.8,32.6344 C2188.8,32.6344 2178,32.6344 2178,26.6344 L2178,11.0344 " fill="#FEFECE" filter="url(#fthzebkdgotxr)" style="stroke:#000000;stroke-width:0.8999999999999999;"/><path d="M2178,11.0344 C2178,17.0344 2188.8,17.0344 2188.8,17.0344 C2188.8,17.0344 2199.6,17.0344 2199.6,11.0344 " fill="none" style="stroke:#000000;stroke-width:0.8999999999999999;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-style="italic" lengthAdjust="spacing" textLength="47.4" x="2163.3" y="1092.0574">«repository»</text><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="118.8" x="2127.6" y="1102.623">SurveyQuestionnareRepository</text><path d="M2178,1110.4688 C2178,1104.4688 2188.8,1104.4688 2188.8,1104.4688 C2188.8,1104.4688 2199.6,1104.4688 2199.6,1110.4688 L2199.6,1126.0688 C2199.6,1132.0688 2188.8,1132.0688 2188.8,1132.0688 C2188.8,1132.0688 2178,1132.0688 2178,1126.0688 L2178,1110.4688 " fill="#FEFECE" filter="url(#fthzebkdgotxr)" style="stroke:#000000;stroke-width:0.8999999999999999;"/><path d="M2178,1110.4688 C2178,1116.4688 2188.8,1116.4688 2188.8,1116.4688 C2188.8,1116.4688 2199.6,1116.4688 2199.6,1110.4688 " fill="none" style="stroke:#000000;stroke-width:0.8999999999999999;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-style="italic" lengthAdjust="spacing" textLength="47.4" x="2293.2" y="41.3543">«repository»</text><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="121.8" x="2256" y="51.9199">AnswerQuestionnaireRepository</text><path d="M2307.9,11.0344 C2307.9,5.0344 2318.7,5.0344 2318.7,5.0344 C2318.7,5.0344 2329.5,5.0344 2329.5,11.0344 L2329.5,26.6344 C2329.5,32.6344 2318.7,32.6344 2318.7,32.6344 C2318.7,32.6344 2307.9,32.6344 2307.9,26.6344 L2307.9,11.0344 " fill="#FEFECE" filter="url(#fthzebkdgotxr)" style="stroke:#000000;stroke-width:0.8999999999999999;"/><path d="M2307.9,11.0344 C2307.9,17.0344 2318.7,17.0344 2318.7,17.0344 C2318.7,17.0344 2329.5,17.0344 2329.5,11.0344 " fill="none" style="stroke:#000000;stroke-width:0.8999999999999999;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-style="italic" lengthAdjust="spacing" textLength="47.4" x="2293.2" y="1092.0574">«repository»</text><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="121.8" x="2256" y="1102.623">AnswerQuestionnaireRepository</text><path d="M2307.9,1110.4688 C2307.9,1104.4688 2318.7,1104.4688 2318.7,1104.4688 C2318.7,1104.4688 2329.5,1104.4688 2329.5,1110.4688 L2329.5,1126.0688 C2329.5,1132.0688 2318.7,1132.0688 2318.7,1132.0688 C2318.7,1132.0688 2307.9,1132.0688 2307.9,1126.0688 L2307.9,1110.4688 " fill="#FEFECE" filter="url(#fthzebkdgotxr)" style="stroke:#000000;stroke-width:0.8999999999999999;"/><path d="M2307.9,1110.4688 C2307.9,1116.4688 2318.7,1116.4688 2318.7,1116.4688 C2318.7,1116.4688 2329.5,1116.4688 2329.5,1110.4688 " fill="none" style="stroke:#000000;stroke-width:0.8999999999999999;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-style="italic" lengthAdjust="spacing" textLength="47.4" x="2394.9" y="41.3543">«repository»</text><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="62.4" x="2387.4" y="51.9199">ClientRepository</text><path d="M2409.6,11.0344 C2409.6,5.0344 2420.4,5.0344 2420.4,5.0344 C2420.4,5.0344 2431.2,5.0344 2431.2,11.0344 L2431.2,26.6344 C2431.2,32.6344 2420.4,32.6344 2420.4,32.6344 C2420.4,32.6344 2409.6,32.6344 2409.6,26.6344 L2409.6,11.0344 " fill="#FEFECE" filter="url(#fthzebkdgotxr)" style="stroke:#000000;stroke-width:0.8999999999999999;"/><path d="M2409.6,11.0344 C2409.6,17.0344 2420.4,17.0344 2420.4,17.0344 C2420.4,17.0344 2431.2,17.0344 2431.2,11.0344 " fill="none" style="stroke:#000000;stroke-width:0.8999999999999999;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-style="italic" lengthAdjust="spacing" textLength="47.4" x="2394.9" y="1092.0574">«repository»</text><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="62.4" x="2387.4" y="1102.623">ClientRepository</text><path d="M2409.6,1110.4688 C2409.6,1104.4688 2420.4,1104.4688 2420.4,1104.4688 C2420.4,1104.4688 2431.2,1104.4688 2431.2,1110.4688 L2431.2,1126.0688 C2431.2,1132.0688 2420.4,1132.0688 2420.4,1132.0688 C2420.4,1132.0688 2409.6,1132.0688 2409.6,1126.0688 L2409.6,1110.4688 " fill="#FEFECE" filter="url(#fthzebkdgotxr)" style="stroke:#000000;stroke-width:0.8999999999999999;"/><path d="M2409.6,1110.4688 C2409.6,1116.4688 2420.4,1116.4688 2420.4,1116.4688 C2420.4,1116.4688 2431.2,1116.4688 2431.2,1110.4688 " fill="none" style="stroke:#000000;stroke-width:0.8999999999999999;"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="1018.7719" style="stroke:#A80036;stroke-width:0.6;" width="6" x="21.6" y="59.7656"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="18.2109" style="stroke:#A80036;stroke-width:0.6;" width="6" x="229.8" y="95.9906"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="441.0516" style="stroke:#A80036;stroke-width:0.6;" width="6" x="229.8" y="132.4125"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="481.4625" style="stroke:#A80036;stroke-width:0.6;" width="6" x="229.8" y="591.675"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="385.2188" style="stroke:#A80036;stroke-width:0.6;" width="6" x="420" y="150.6234"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="440.8406" style="stroke:#A80036;stroke-width:0.6;" width="6" x="420" y="614.0859"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="367.0078" style="stroke:#A80036;stroke-width:0.6;" width="6" x="618" y="168.8344"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="422.6297" style="stroke:#A80036;stroke-width:0.6;" width="6" x="618" y="632.2969"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="348.7969" style="stroke:#A80036;stroke-width:0.6;" width="6" x="816" y="187.0453"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="404.4188" style="stroke:#A80036;stroke-width:0.6;" width="6" x="816" y="650.5078"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="54.6328" style="stroke:#A80036;stroke-width:0.6;" width="6" x="1135.2" y="205.2563"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="54.6328" style="stroke:#A80036;stroke-width:0.6;" width="6" x="1135.2" y="668.7188"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="18.2109" style="stroke:#A80036;stroke-width:0.6;" width="6" x="1501.2" y="223.4672"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="218.5313" style="stroke:#A80036;stroke-width:0.6;" width="6" x="1501.2" y="317.3109"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="18.2109" style="stroke:#A80036;stroke-width:0.6;" width="6" x="1501.2" y="686.9297"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="274.1531" style="stroke:#A80036;stroke-width:0.6;" width="6" x="1501.2" y="780.7734"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="200.3203" style="stroke:#A80036;stroke-width:0.6;" width="6" x="1722.6" y="335.5219"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="255.9422" style="stroke:#A80036;stroke-width:0.6;" width="6" x="1722.6" y="798.9844"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="18.2109" style="stroke:#A80036;stroke-width:0.6;" width="6" x="1918.2" y="905.25"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="18.2109" style="stroke:#A80036;stroke-width:0.6;" width="6" x="2185.8" y="353.7328"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="18.2109" style="stroke:#A80036;stroke-width:0.6;" width="6" x="2185.8" y="817.1953"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="18.2109" style="stroke:#A80036;stroke-width:0.6;" width="6" x="2315.7" y="426.5766"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="18" style="stroke:#A80036;stroke-width:0.6;" width="6" x="2315.7" y="941.6719"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="18.2109" style="stroke:#A80036;stroke-width:0.6;" width="6" x="2417.4" y="390.1547"/><rect fill="#FFFFFF" filter="url(#fthzebkdgotxr)" height="18.2109" style="stroke:#A80036;stroke-width:0.6;" width="6" x="2417.4" y="853.6172"/><path d="M6,63.9656 L49.8,63.9656 L49.8,68.7656 L43.8,74.7656 L6,74.7656 L6,63.9656 " fill="#EEEEEE" style="stroke:#000000;stroke-width:0.6;"/><rect fill="none" height="476.6766" style="stroke:#000000;stroke-width:1.2;" width="2453.4" x="6" y="63.9656"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="16.8" x="15" y="72.6627">loop</text><text fill="#000000" font-family="sans-serif" font-size="6.6" font-weight="bold" lengthAdjust="spacing" textLength="135" x="58.8" y="72.017">[enquanto não escolher um questionário</text><text fill="#000000" font-family="sans-serif" font-size="6.6" font-weight="bold" lengthAdjust="spacing" textLength="108.6" x="60.6" y="80.3186">que ainda não tenha respondido]</text><polygon fill="#A80036" points="222.6,93.5906,228.6,95.9906,222.6,98.3906,225,95.9906" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;" x1="27.6" x2="226.2" y1="95.9906" y2="95.9906"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="4.2" x="31.8" y="93.0768">1</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="170.4" x="38.4" y="93.0768">inicia o processo de responder a um questionário</text><polygon fill="#A80036" points="34.2,111.8016,28.2,114.2016,34.2,116.6016,31.8,114.2016" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;stroke-dasharray:2.0,2.0;" x1="30.6" x2="232.2" y1="114.2016" y2="114.2016"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="4.2" x="37.8" y="111.2877">2</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="181.2" x="44.4" y="111.2877">mostra a lista de questionarios apropriada ao cliente</text><polygon fill="#A80036" points="222.6,130.0125,228.6,132.4125,222.6,134.8125,225,132.4125" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;" x1="27.6" x2="226.2" y1="132.4125" y2="132.4125"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="4.2" x="31.8" y="129.4986">3</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="122.4" x="38.4" y="129.4986">seleciona o questionario pretendido</text><polygon fill="#A80036" points="412.8,148.2234,418.8,150.6234,412.8,153.0234,415.2,150.6234" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;" x1="235.8" x2="416.4" y1="150.6234" y2="150.6234"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="4.2" x="240" y="147.7096">4</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="117.6" x="246.6" y="147.7096">verifyIfClientAnswered(surveyDTO)</text><polygon fill="#A80036" points="610.8,166.4344,616.8,168.8344,610.8,171.2344,613.2,168.8344" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;" x1="426" x2="614.4" y1="168.8344" y2="168.8344"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="4.2" x="430.2" y="165.9205">5</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="154.8" x="436.8" y="165.9205">verifyIfClientHasAnswered(email, surveyDTO)</text><polygon fill="#A80036" points="808.8,184.6453,814.8,187.0453,808.8,189.4453,811.2,187.0453" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;" x1="624" x2="812.4" y1="187.0453" y2="187.0453"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="4.2" x="628.2" y="184.1314">6</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="154.8" x="634.8" y="184.1314">verifyIfClientHasAnswered(email, surveyDTO)</text><polygon fill="#A80036" points="1128,202.8563,1134,205.2563,1128,207.6563,1130.4,205.2563" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;" x1="822" x2="1131.6" y1="205.2563" y2="205.2563"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="4.2" x="826.2" y="202.3424">7</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="291" x="832.8" y="202.3424">parse(messageRequest, sOutputObject, sIn, sOut, clientMessageUS, sInputObject)</text><polygon fill="#A80036" points="1494,221.0672,1500,223.4672,1494,225.8672,1496.4,223.4672" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;" x1="1141.2" x2="1497.6" y1="223.4672" y2="223.4672"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="4.2" x="1145.4" y="220.5533">8</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="337.8" x="1152" y="220.5533">create(orderSrvController, messageRequest, sOutObject, sIn, sOut, clientMessageUS, sInObject)</text><polygon fill="#A80036" points="1147.8,239.2781,1141.8,241.6781,1147.8,244.0781,1145.4,241.6781" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;stroke-dasharray:2.0,2.0;" x1="1144.2" x2="1503.6" y1="241.6781" y2="241.6781"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="4.2" x="1151.4" y="238.7643">9</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="46.2" x="1158" y="238.7643">orderRequest</text><polygon fill="#A80036" points="828.6,257.4891,822.6,259.8891,828.6,262.2891,826.2,259.8891" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;stroke-dasharray:2.0,2.0;" x1="825" x2="1137.6" y1="259.8891" y2="259.8891"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="8.4" x="832.2" y="256.9752">10</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="46.2" x="843" y="256.9752">orderRequest</text><path d="M825,282.6891 L825,298.2891 L874.2,298.2891 L874.2,288.6891 L868.2,282.6891 L825,282.6891 " fill="#FBFB77" filter="url(#fthzebkdgotxr)" style="stroke:#A80036;stroke-width:0.6;"/><path d="M868.2,282.6891 L868.2,288.6891 L874.2,288.6891 L868.2,282.6891 " fill="#FBFB77" style="stroke:#A80036;stroke-width:0.6;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="25.8" x="828.6" y="293.7861">request</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="8.4" x="856.8" y="293.7861">16</text><polygon fill="#A80036" points="1494,314.9109,1500,317.3109,1494,319.7109,1496.4,317.3109" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;" x1="822" x2="1497.6" y1="317.3109" y2="317.3109"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="8.4" x="826.2" y="314.3971">11</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="32.4" x="837" y="314.3971">execute()</text><polygon fill="#A80036" points="1715.4,333.1219,1721.4,335.5219,1715.4,337.9219,1717.8,335.5219" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;" x1="1507.2" x2="1719" y1="335.5219" y2="335.5219"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="8.4" x="1511.4" y="332.608">12</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="143.4" x="1522.2" y="332.608">verifyIfClientAnswered(email, surveyCode)</text><polygon fill="#A80036" points="2178.6,351.3328,2184.6,353.7328,2178.6,356.1328,2181,353.7328" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;" x1="1728.6" x2="2182.2" y1="353.7328" y2="353.7328"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="8.4" x="1732.8" y="350.8189">13</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="76.2" x="1743.6" y="350.8189">ofIdentity(surveyCode)</text><polygon fill="#A80036" points="1735.2,369.5438,1729.2,371.9437,1735.2,374.3438,1732.8,371.9437" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;stroke-dasharray:2.0,2.0;" x1="1731.6" x2="2188.2" y1="371.9437" y2="371.9437"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="8.4" x="1738.8" y="369.0299">14</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="22.2" x="1749.6" y="369.0299">survey</text><polygon fill="#A80036" points="2410.2,387.7547,2416.2,390.1547,2410.2,392.5547,2412.6,390.1547" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;" x1="1728.6" x2="2413.8" y1="390.1547" y2="390.1547"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="8.4" x="1732.8" y="387.2408">15</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="64.8" x="1743.6" y="387.2408">findByEmail(email)</text><polygon fill="#A80036" points="1735.2,405.9656,1729.2,408.3656,1735.2,410.7656,1732.8,408.3656" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;stroke-dasharray:2.0,2.0;" x1="1731.6" x2="2419.8" y1="408.3656" y2="408.3656"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="8.4" x="1738.8" y="405.4518">16</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="42" x="1749.6" y="405.4518">clientSurvey</text><polygon fill="#A80036" points="2308.5,424.1766,2314.5,426.5766,2308.5,428.9766,2310.9,426.5766" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;" x1="1728.6" x2="2312.1" y1="426.5766" y2="426.5766"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="8.4" x="1732.8" y="423.6627">17</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="121.8" x="1743.6" y="423.6627">findAnswersByClient(client, survey)</text><polygon fill="#A80036" points="1735.2,442.3875,1729.2,444.7875,1735.2,447.1875,1732.8,444.7875" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;stroke-dasharray:2.0,2.0;" x1="1731.6" x2="2318.1" y1="444.7875" y2="444.7875"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="8.4" x="1738.8" y="441.8736">18</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="28.8" x="1749.6" y="441.8736">answers</text><polygon fill="#A80036" points="1513.8,460.5984,1507.8,462.9984,1513.8,465.3984,1511.4,462.9984" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;stroke-dasharray:2.0,2.0;" x1="1510.2" x2="1722" y1="462.9984" y2="462.9984"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="8.4" x="1517.4" y="460.0846">19</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="58.8" x="1528.2" y="460.0846">hasNotAnswered</text><polygon fill="#A80036" points="828.6,478.8094,822.6,481.2094,828.6,483.6094,826.2,481.2094" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;stroke-dasharray:2.0,2.0;" x1="825" x2="1500.6" y1="481.2094" y2="481.2094"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="8.4" x="832.2" y="478.2955">20</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="58.8" x="843" y="478.2955">hasNotAnswered</text><polygon fill="#A80036" points="630.6,497.0203,624.6,499.4203,630.6,501.8203,628.2,499.4203" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;stroke-dasharray:2.0,2.0;" x1="627" x2="815.4" y1="499.4203" y2="499.4203"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="8.4" x="634.2" y="496.5064">21</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="58.8" x="645" y="496.5064">hasNotAnswered</text><polygon fill="#A80036" points="432.6,515.2312,426.6,517.6313,432.6,520.0313,430.2,517.6313" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;stroke-dasharray:2.0,2.0;" x1="429" x2="617.4" y1="517.6313" y2="517.6313"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="8.4" x="436.2" y="514.7174">22</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="58.8" x="447" y="514.7174">hasNotAnswered</text><polygon fill="#A80036" points="242.4,533.4422,236.4,535.8422,242.4,538.2422,240,535.8422" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;stroke-dasharray:2.0,2.0;" x1="238.8" x2="422.4" y1="535.8422" y2="535.8422"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="8.4" x="246" y="532.9283">23</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="58.8" x="256.8" y="532.9283">hasNotAnswered</text><path d="M6,549.0422 L49.8,549.0422 L49.8,553.8422 L43.8,559.8422 L6,559.8422 L6,549.0422 " fill="#EEEEEE" style="stroke:#000000;stroke-width:0.6;"/><rect fill="none" height="47.4328" style="stroke:#000000;stroke-width:1.2;" width="282.3" x="6" y="549.0422"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="16.8" x="15" y="557.7393">loop</text><text fill="#000000" font-family="sans-serif" font-size="6.6" font-weight="bold" lengthAdjust="spacing" textLength="136.2" x="58.8" y="557.0936">[enquanto o questionário tiver questões]</text><polygon fill="#A80036" points="34.2,571.0641,28.2,573.4641,34.2,575.8641,31.8,573.4641" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;stroke-dasharray:2.0,2.0;" x1="30.6" x2="232.2" y1="573.4641" y2="573.4641"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="8.4" x="37.8" y="570.5502">24</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="70.8" x="48.6" y="570.5502">apresenta a questão</text><polygon fill="#A80036" points="222.6,589.275,228.6,591.675,222.6,594.075,225,591.675" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;" x1="27.6" x2="226.2" y1="591.675" y2="591.675"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="8.4" x="31.8" y="588.7611">25</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="68.4" x="42.6" y="588.7611">responde à questão</text><polygon fill="#A80036" points="412.8,611.6859,418.8,614.0859,412.8,616.4859,415.2,614.0859" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;" x1="235.8" x2="416.4" y1="614.0859" y2="614.0859"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="8.4" x="240" y="611.1721">26</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="162" x="250.8" y="611.1721">sendAnswersToBeSaved(answers, surveyDTO)</text><polygon fill="#A80036" points="610.8,629.8969,616.8,632.2969,610.8,634.6969,613.2,632.2969" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;" x1="426" x2="614.4" y1="632.2969" y2="632.2969"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="8.4" x="430.2" y="629.383">27</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="169.8" x="441" y="629.383">sendAnswersToBeSaved(answers, survey, email)</text><polygon fill="#A80036" points="808.8,648.1078,814.8,650.5078,808.8,652.9078,811.2,650.5078" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;" x1="624" x2="812.4" y1="650.5078" y2="650.5078"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="8.4" x="628.2" y="647.5939">28</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="169.8" x="639" y="647.5939">sendAnswersToBeSaved(answers, survey, email)</text><polygon fill="#A80036" points="1128,666.3188,1134,668.7188,1128,671.1188,1130.4,668.7188" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;" x1="822" x2="1131.6" y1="668.7188" y2="668.7188"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="8.4" x="826.2" y="665.8049">29</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="291" x="837" y="665.8049">parse(messageRequest, sOutputObject, sIn, sOut, clientMessageUS, sInputObject)</text><polygon fill="#A80036" points="1494,684.5297,1500,686.9297,1494,689.3297,1496.4,686.9297" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;" x1="1141.2" x2="1497.6" y1="686.9297" y2="686.9297"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="8.4" x="1145.4" y="684.0158">30</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="337.8" x="1156.2" y="684.0158">create(orderSrvController, messageRequest, sOutObject, sIn, sOut, clientMessageUS, sInObject)</text><polygon fill="#A80036" points="1147.8,702.7406,1141.8,705.1406,1147.8,707.5406,1145.4,705.1406" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;stroke-dasharray:2.0,2.0;" x1="1144.2" x2="1503.6" y1="705.1406" y2="705.1406"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="8.4" x="1151.4" y="702.2268">31</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="46.2" x="1162.2" y="702.2268">orderRequest</text><polygon fill="#A80036" points="828.6,720.9516,822.6,723.3516,828.6,725.7516,826.2,723.3516" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;stroke-dasharray:2.0,2.0;" x1="825" x2="1137.6" y1="723.3516" y2="723.3516"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="8.4" x="832.2" y="720.4377">32</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="46.2" x="843" y="720.4377">orderRequest</text><path d="M825,746.1516 L825,761.7516 L874.2,761.7516 L874.2,752.1516 L868.2,746.1516 L825,746.1516 " fill="#FBFB77" filter="url(#fthzebkdgotxr)" style="stroke:#A80036;stroke-width:0.6;"/><path d="M868.2,746.1516 L868.2,752.1516 L874.2,752.1516 L868.2,746.1516 " fill="#FBFB77" style="stroke:#A80036;stroke-width:0.6;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="25.8" x="828.6" y="757.2486">request</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="8.4" x="856.8" y="757.2486">14</text><polygon fill="#A80036" points="1494,778.3734,1500,780.7734,1494,783.1734,1496.4,780.7734" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;" x1="822" x2="1497.6" y1="780.7734" y2="780.7734"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="8.4" x="826.2" y="777.8596">33</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="32.4" x="837" y="777.8596">execute()</text><polygon fill="#A80036" points="1715.4,796.5844,1721.4,798.9844,1715.4,801.3844,1717.8,798.9844" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;" x1="1507.2" x2="1719" y1="798.9844" y2="798.9844"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="8.4" x="1511.4" y="796.0705">34</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="193.2" x="1522.2" y="796.0705">saveQuestionnaireAnswers(answers, surveyDTO, email)</text><polygon fill="#A80036" points="2178.6,814.7953,2184.6,817.1953,2178.6,819.5953,2181,817.1953" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;" x1="1728.6" x2="2182.2" y1="817.1953" y2="817.1953"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="8.4" x="1732.8" y="814.2814">35</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="76.2" x="1743.6" y="814.2814">ofIdentity(surveyCode)</text><polygon fill="#A80036" points="1735.2,833.0063,1729.2,835.4063,1735.2,837.8063,1732.8,835.4063" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;stroke-dasharray:2.0,2.0;" x1="1731.6" x2="2188.2" y1="835.4063" y2="835.4063"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="8.4" x="1738.8" y="832.4924">36</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="22.2" x="1749.6" y="832.4924">survey</text><polygon fill="#A80036" points="2410.2,851.2172,2416.2,853.6172,2410.2,856.0172,2412.6,853.6172" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;" x1="1728.6" x2="2413.8" y1="853.6172" y2="853.6172"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="8.4" x="1732.8" y="850.7033">37</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="64.8" x="1743.6" y="850.7033">findByEmail(email)</text><polygon fill="#A80036" points="1735.2,869.4281,1729.2,871.8281,1735.2,874.2281,1732.8,871.8281" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;stroke-dasharray:2.0,2.0;" x1="1731.6" x2="2419.8" y1="871.8281" y2="871.8281"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="8.4" x="1738.8" y="868.9143">38</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="42" x="1749.6" y="868.9143">clientSurvey</text><path d="M1678.2,880.8281 L1722,880.8281 L1722,885.6281 L1716,891.6281 L1678.2,891.6281 L1678.2,880.8281 " fill="#EEEEEE" style="stroke:#000000;stroke-width:0.6;"/><rect fill="none" height="83.6438" style="stroke:#000000;stroke-width:1.2;" width="709.2" x="1678.2" y="880.8281"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="16.8" x="1687.2" y="889.5252">loop</text><text fill="#000000" font-family="sans-serif" font-size="6.6" font-weight="bold" lengthAdjust="spacing" textLength="128.4" x="1731" y="888.8795">[enquanto houver answers a persistir]</text><polygon fill="#A80036" points="1911,902.85,1917,905.25,1911,907.65,1913.4,905.25" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;" x1="1728.6" x2="1914.6" y1="905.25" y2="905.25"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="8.4" x="1732.8" y="902.3361">39</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="158.4" x="1743.6" y="902.3361">create(survey, client, questionID, listAnswers)</text><polygon fill="#A80036" points="1735.2,921.0609,1729.2,923.4609,1735.2,925.8609,1732.8,923.4609" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;stroke-dasharray:2.0,2.0;" x1="1731.6" x2="1920.6" y1="923.4609" y2="923.4609"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="8.4" x="1738.8" y="920.5471">40</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="24.6" x="1749.6" y="920.5471">answer</text><polygon fill="#A80036" points="2308.5,939.2719,2314.5,941.6719,2308.5,944.0719,2310.9,941.6719" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;" x1="1728.6" x2="2312.1" y1="941.6719" y2="941.6719"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="8.4" x="1732.8" y="938.758">41</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="45" x="1743.6" y="938.758">save(answer)</text><polygon fill="#A80036" points="1513.8,979.6828,1507.8,982.0828,1513.8,984.4828,1511.4,982.0828" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;stroke-dasharray:2.0,2.0;" x1="1510.2" x2="1722" y1="982.0828" y2="982.0828"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="8.4" x="1517.4" y="979.1689">42</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="29.4" x="1528.2" y="979.1689">success</text><polygon fill="#A80036" points="828.6,997.8938,822.6,1000.2937,828.6,1002.6937,826.2,1000.2937" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;stroke-dasharray:2.0,2.0;" x1="825" x2="1500.6" y1="1000.2937" y2="1000.2937"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="8.4" x="832.2" y="997.3799">43</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="29.4" x="843" y="997.3799">success</text><polygon fill="#A80036" points="630.6,1016.1047,624.6,1018.5047,630.6,1020.9047,628.2,1018.5047" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;stroke-dasharray:2.0,2.0;" x1="627" x2="815.4" y1="1018.5047" y2="1018.5047"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="8.4" x="634.2" y="1015.5908">44</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="29.4" x="645" y="1015.5908">success</text><polygon fill="#A80036" points="432.6,1034.3156,426.6,1036.7156,432.6,1039.1156,430.2,1036.7156" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;stroke-dasharray:2.0,2.0;" x1="429" x2="617.4" y1="1036.7156" y2="1036.7156"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="8.4" x="436.2" y="1033.8018">45</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="29.4" x="447" y="1033.8018">success</text><polygon fill="#A80036" points="242.4,1052.5266,236.4,1054.9266,242.4,1057.3266,240,1054.9266" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;stroke-dasharray:2.0,2.0;" x1="238.8" x2="422.4" y1="1054.9266" y2="1054.9266"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="8.4" x="246" y="1052.0127">46</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="29.4" x="256.8" y="1052.0127">success</text><polygon fill="#A80036" points="34.2,1070.7375,28.2,1073.1375,34.2,1075.5375,31.8,1073.1375" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;stroke-dasharray:2.0,2.0;" x1="30.6" x2="232.2" y1="1073.1375" y2="1073.1375"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="8.4" x="37.8" y="1070.2236">47</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="108.6" x="48.6" y="1070.2236">informa o sucesso da operação</text><!--MD5=[728c8ea377d0611ea80aa0d4ebf2e98d]
@startuml

/' FALTA PARTE DE MOSTRAR LISTA APROPRIADA DE QUESTIONARIOS AO CLIENT '/

autonumber
actor "Client" as C

participant AnswerQuestionnaireUI as UI <<presentation>>
participant AnswerQuestionnaireController as CONTROLLER <<application>>
participant AnswerQuestionnaireService as SERVICE <<application>>
participant TcpOrderSrv as ORDER_SERVER
participant OrderServerMessageParser as PARSER
participant OrderServerRequest as ORDER_REQUEST
participant OrderSrvController as ORDER_CONTROLLER <<application>>

participant "Client" as CLIENT <<domain>>
participant "Questionnaire" as QUESTIONNAIRE <<domain>>
participant "Answer" as ANSWER <<domain>>

participant PersistenceContext as PERSISTENCE <<persistence>>
participant RepositoryFactory as FACTORY <<factory>>
database SurveyQuestionnareRepository as SURVEY_REP <<repository>>
database AnswerQuestionnaireRepository as ANSWER_REP <<repository>>
database ClientRepository as CLIENT_REP <<repository>>

loop enquanto não escolher um questionário\n que ainda não tenha respondido
activate C
C -> UI : inicia o processo de responder a um questionário
activate UI
UI - -> C : mostra a lista de questionarios apropriada ao cliente
deactivate UI

C -> UI : seleciona o questionario pretendido
activate UI
UI -> CONTROLLER : verifyIfClientAnswered(surveyDTO)
activate CONTROLLER
CONTROLLER -> SERVICE : verifyIfClientHasAnswered(email, surveyDTO)
activate SERVICE
SERVICE -> ORDER_SERVER : verifyIfClientHasAnswered(email, surveyDTO)
activate ORDER_SERVER

ORDER_SERVER -> PARSER : parse(messageRequest, sOutputObject, sIn, sOut, clientMessageUS, sInputObject)
activate PARSER
PARSER -> ORDER_REQUEST : create(orderSrvController, messageRequest, sOutObject, sIn, sOut, clientMessageUS, sInObject)
activate ORDER_REQUEST
ORDER_REQUEST - -> PARSER : orderRequest
deactivate ORDER_REQUEST
PARSER - -> ORDER_SERVER : orderRequest
deactivate PARSER
|||
note right of ORDER_SERVER
request **16**
end note
ORDER_SERVER -> ORDER_REQUEST : execute()
activate ORDER_REQUEST

ORDER_REQUEST -> ORDER_CONTROLLER : verifyIfClientAnswered(email, surveyCode)
activate ORDER_CONTROLLER
ORDER_CONTROLLER -> SURVEY_REP : ofIdentity(surveyCode)
activate SURVEY_REP
SURVEY_REP - -> ORDER_CONTROLLER : survey
deactivate SURVEY_REP
ORDER_CONTROLLER -> CLIENT_REP : findByEmail(email)
activate CLIENT_REP
CLIENT_REP - -> ORDER_CONTROLLER : clientSurvey
deactivate CLIENT_REP
ORDER_CONTROLLER -> ANSWER_REP : findAnswersByClient(client, survey)
activate ANSWER_REP
ANSWER_REP - -> ORDER_CONTROLLER : answers
deactivate ANSWER_REP

ORDER_CONTROLLER - -> ORDER_REQUEST : hasNotAnswered
ORDER_REQUEST - -> ORDER_SERVER : hasNotAnswered
ORDER_SERVER - -> SERVICE : hasNotAnswered
SERVICE - -> CONTROLLER : hasNotAnswered
CONTROLLER - -> UI : hasNotAnswered

deactivate ORDER_CONTROLLER
deactivate ORDER_REQUEST
deactivate PARSER
deactivate ORDER_SERVER
deactivate SERVICE
deactivate CONTROLLER
end

loop enquanto o questionário tiver questões
UI - -> C : apresenta a questão
deactivate UI
C -> UI : responde à questão
activate UI
end

UI -> CONTROLLER : sendAnswersToBeSaved(answers, surveyDTO)
activate CONTROLLER
CONTROLLER -> SERVICE : sendAnswersToBeSaved(answers, survey, email)
activate SERVICE
SERVICE -> ORDER_SERVER : sendAnswersToBeSaved(answers, survey, email)
activate ORDER_SERVER

ORDER_SERVER -> PARSER : parse(messageRequest, sOutputObject, sIn, sOut, clientMessageUS, sInputObject)
activate PARSER
PARSER -> ORDER_REQUEST : create(orderSrvController, messageRequest, sOutObject, sIn, sOut, clientMessageUS, sInObject)
activate ORDER_REQUEST
ORDER_REQUEST - -> PARSER : orderRequest
deactivate ORDER_REQUEST
PARSER - -> ORDER_SERVER : orderRequest
deactivate PARSER
|||
note right of ORDER_SERVER
request **14**
end note
ORDER_SERVER -> ORDER_REQUEST : execute()
activate ORDER_REQUEST

ORDER_REQUEST -> ORDER_CONTROLLER : saveQuestionnaireAnswers(answers, surveyDTO, email)
activate ORDER_CONTROLLER
ORDER_CONTROLLER -> SURVEY_REP : ofIdentity(surveyCode)
activate SURVEY_REP
SURVEY_REP - -> ORDER_CONTROLLER : survey
deactivate SURVEY_REP
ORDER_CONTROLLER -> CLIENT_REP : findByEmail(email)
activate CLIENT_REP
CLIENT_REP - -> ORDER_CONTROLLER : clientSurvey
deactivate CLIENT_REP
loop enquanto houver answers a persistir
ORDER_CONTROLLER -> ANSWER : create(survey, client, questionID, listAnswers)
activate ANSWER
ANSWER - -> ORDER_CONTROLLER : answer
deactivate ANSWER
ORDER_CONTROLLER -> ANSWER_REP : save(answer)
activate ANSWER_REP
deactivate ANSWER_REP


end

ORDER_CONTROLLER - -> ORDER_REQUEST : success
ORDER_REQUEST - -> ORDER_SERVER : success
ORDER_SERVER - -> SERVICE : success
SERVICE - -> CONTROLLER : success
CONTROLLER - -> UI : success

deactivate ORDER_CONTROLLER
deactivate ORDER_REQUEST
deactivate PARSER
deactivate ORDER_SERVER
deactivate SERVICE
deactivate CONTROLLER



UI - -> C : informa o sucesso da operação
deactivate UI



@enduml

@startuml


autonumber
actor "Client" as C

participant AnswerQuestionnaireUI as UI <<presentation>>
participant AnswerQuestionnaireController as CONTROLLER <<application>>
participant AnswerQuestionnaireService as SERVICE <<application>>
participant TcpOrderSrv as ORDER_SERVER
participant OrderServerMessageParser as PARSER
participant OrderServerRequest as ORDER_REQUEST
participant OrderSrvController as ORDER_CONTROLLER <<application>>

participant "Client" as CLIENT <<domain>>
participant "Questionnaire" as QUESTIONNAIRE <<domain>>
participant "Answer" as ANSWER <<domain>>

participant PersistenceContext as PERSISTENCE <<persistence>>
participant RepositoryFactory as FACTORY <<factory>>
database SurveyQuestionnareRepository as SURVEY_REP <<repository>>
database AnswerQuestionnaireRepository as ANSWER_REP <<repository>>
database ClientRepository as CLIENT_REP <<repository>>

loop enquanto não escolher um questionário\n que ainda não tenha respondido
activate C
C -> UI : inicia o processo de responder a um questionário
activate UI
UI - -> C : mostra a lista de questionarios apropriada ao cliente
deactivate UI

C -> UI : seleciona o questionario pretendido
activate UI
UI -> CONTROLLER : verifyIfClientAnswered(surveyDTO)
activate CONTROLLER
CONTROLLER -> SERVICE : verifyIfClientHasAnswered(email, surveyDTO)
activate SERVICE
SERVICE -> ORDER_SERVER : verifyIfClientHasAnswered(email, surveyDTO)
activate ORDER_SERVER

ORDER_SERVER -> PARSER : parse(messageRequest, sOutputObject, sIn, sOut, clientMessageUS, sInputObject)
activate PARSER
PARSER -> ORDER_REQUEST : create(orderSrvController, messageRequest, sOutObject, sIn, sOut, clientMessageUS, sInObject)
activate ORDER_REQUEST
ORDER_REQUEST - -> PARSER : orderRequest
deactivate ORDER_REQUEST
PARSER - -> ORDER_SERVER : orderRequest
deactivate PARSER
|||
note right of ORDER_SERVER
request **16**
end note
ORDER_SERVER -> ORDER_REQUEST : execute()
activate ORDER_REQUEST

ORDER_REQUEST -> ORDER_CONTROLLER : verifyIfClientAnswered(email, surveyCode)
activate ORDER_CONTROLLER
ORDER_CONTROLLER -> SURVEY_REP : ofIdentity(surveyCode)
activate SURVEY_REP
SURVEY_REP - -> ORDER_CONTROLLER : survey
deactivate SURVEY_REP
ORDER_CONTROLLER -> CLIENT_REP : findByEmail(email)
activate CLIENT_REP
CLIENT_REP - -> ORDER_CONTROLLER : clientSurvey
deactivate CLIENT_REP
ORDER_CONTROLLER -> ANSWER_REP : findAnswersByClient(client, survey)
activate ANSWER_REP
ANSWER_REP - -> ORDER_CONTROLLER : answers
deactivate ANSWER_REP

ORDER_CONTROLLER - -> ORDER_REQUEST : hasNotAnswered
ORDER_REQUEST - -> ORDER_SERVER : hasNotAnswered
ORDER_SERVER - -> SERVICE : hasNotAnswered
SERVICE - -> CONTROLLER : hasNotAnswered
CONTROLLER - -> UI : hasNotAnswered

deactivate ORDER_CONTROLLER
deactivate ORDER_REQUEST
deactivate PARSER
deactivate ORDER_SERVER
deactivate SERVICE
deactivate CONTROLLER
end

loop enquanto o questionário tiver questões
UI - -> C : apresenta a questão
deactivate UI
C -> UI : responde à questão
activate UI
end

UI -> CONTROLLER : sendAnswersToBeSaved(answers, surveyDTO)
activate CONTROLLER
CONTROLLER -> SERVICE : sendAnswersToBeSaved(answers, survey, email)
activate SERVICE
SERVICE -> ORDER_SERVER : sendAnswersToBeSaved(answers, survey, email)
activate ORDER_SERVER

ORDER_SERVER -> PARSER : parse(messageRequest, sOutputObject, sIn, sOut, clientMessageUS, sInputObject)
activate PARSER
PARSER -> ORDER_REQUEST : create(orderSrvController, messageRequest, sOutObject, sIn, sOut, clientMessageUS, sInObject)
activate ORDER_REQUEST
ORDER_REQUEST - -> PARSER : orderRequest
deactivate ORDER_REQUEST
PARSER - -> ORDER_SERVER : orderRequest
deactivate PARSER
|||
note right of ORDER_SERVER
request **14**
end note
ORDER_SERVER -> ORDER_REQUEST : execute()
activate ORDER_REQUEST

ORDER_REQUEST -> ORDER_CONTROLLER : saveQuestionnaireAnswers(answers, surveyDTO, email)
activate ORDER_CONTROLLER
ORDER_CONTROLLER -> SURVEY_REP : ofIdentity(surveyCode)
activate SURVEY_REP
SURVEY_REP - -> ORDER_CONTROLLER : survey
deactivate SURVEY_REP
ORDER_CONTROLLER -> CLIENT_REP : findByEmail(email)
activate CLIENT_REP
CLIENT_REP - -> ORDER_CONTROLLER : clientSurvey
deactivate CLIENT_REP
loop enquanto houver answers a persistir
ORDER_CONTROLLER -> ANSWER : create(survey, client, questionID, listAnswers)
activate ANSWER
ANSWER - -> ORDER_CONTROLLER : answer
deactivate ANSWER
ORDER_CONTROLLER -> ANSWER_REP : save(answer)
activate ANSWER_REP
deactivate ANSWER_REP


end

ORDER_CONTROLLER - -> ORDER_REQUEST : success
ORDER_REQUEST - -> ORDER_SERVER : success
ORDER_SERVER - -> SERVICE : success
SERVICE - -> CONTROLLER : success
CONTROLLER - -> UI : success

deactivate ORDER_CONTROLLER
deactivate ORDER_REQUEST
deactivate PARSER
deactivate ORDER_SERVER
deactivate SERVICE
deactivate CONTROLLER



UI - -> C : informa o sucesso da operação
deactivate UI



@enduml

PlantUML version 1.2021.4(Sun Apr 04 09:49:39 BST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>