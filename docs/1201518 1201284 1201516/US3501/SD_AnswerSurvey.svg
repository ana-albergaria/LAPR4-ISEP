<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="786.8px" preserveAspectRatio="none" style="width:1699px;height:786px;" version="1.1" viewBox="0 0 1699 786" width="1699.6px" zoomAndPan="magnify"><defs><filter height="300%" id="f28socyf77bbx" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="0.8000000000000002"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="1.6000000000000003" dy="1.6000000000000003" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="708.5219" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="14.4" y="39.8438"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="12.1406" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="153.2" y="63.9938"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="323.375" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="153.2" y="88.275"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="11.2" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="155.2" y="375.3688"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="320.975" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="153.2" y="423.7906"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="256.8125" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="334.4" y="100.4156"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="293.8938" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="334.4" y="438.7313"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="244.6719" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="466.4" y="112.5563"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="281.7531" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="466.4" y="450.8719"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="232.5313" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="598.4" y="124.6969"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="269.6125" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="598.4" y="463.0125"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="36.4219" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="811.2" y="136.8375"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="36.4219" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="811.2" y="475.1531"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="12.1406" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="1055.2" y="148.9781"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="145.6875" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="1055.2" y="211.5406"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="12.1406" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="1055.2" y="487.2938"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="182.7688" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="1055.2" y="549.8563"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="133.5469" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="1202.8" y="223.6813"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="170.6281" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="1202.8" y="561.9969"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="12.1406" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="1333.2" y="632.8406"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="12.1406" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="1511.6" y="235.8219"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="12.1406" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="1511.6" y="574.1375"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="12.1406" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="1598.2" y="284.3844"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="12" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="1598.2" y="657.1219"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="12.1406" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="1666" y="260.1031"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="12.1406" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="1666" y="598.4188"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="317.7844" style="stroke:#000000;stroke-width:0.8000000000000002;" width="1690" x="4" y="42.6438"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="31.6219" style="stroke:#000000;stroke-width:0.8000000000000002;" width="188.2" x="4" y="395.3688"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="55.7625" style="stroke:#000000;stroke-width:0.8000000000000002;" width="472.8" x="1173.2" y="616.5594"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;stroke-dasharray:5.0,5.0;" x1="16.4" x2="16.4" y1="35.8438" y2="751.9656"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;stroke-dasharray:5.0,5.0;" x1="155" x2="155" y1="35.8438" y2="751.9656"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;stroke-dasharray:5.0,5.0;" x1="336.2" x2="336.2" y1="35.8438" y2="751.9656"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;stroke-dasharray:5.0,5.0;" x1="468.4" x2="468.4" y1="35.8438" y2="751.9656"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;stroke-dasharray:5.0,5.0;" x1="600.4" x2="600.4" y1="35.8438" y2="751.9656"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;stroke-dasharray:5.0,5.0;" x1="813.2" x2="813.2" y1="35.8438" y2="751.9656"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;stroke-dasharray:5.0,5.0;" x1="1057.2" x2="1057.2" y1="35.8438" y2="751.9656"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;stroke-dasharray:5.0,5.0;" x1="1204.8" x2="1204.8" y1="35.8438" y2="751.9656"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;stroke-dasharray:5.0,5.0;" x1="1252.4" x2="1252.4" y1="35.8438" y2="751.9656"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;stroke-dasharray:5.0,5.0;" x1="1293.6" x2="1293.6" y1="35.8438" y2="751.9656"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;stroke-dasharray:5.0,5.0;" x1="1335.2" x2="1335.2" y1="35.8438" y2="751.9656"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;stroke-dasharray:5.0,5.0;" x1="1383.2" x2="1383.2" y1="35.8438" y2="751.9656"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;stroke-dasharray:5.0,5.0;" x1="1442" x2="1442" y1="35.8438" y2="751.9656"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;stroke-dasharray:5.0,5.0;" x1="1513.6" x2="1513.6" y1="35.8438" y2="751.9656"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;stroke-dasharray:5.0,5.0;" x1="1600" x2="1600" y1="35.8438" y2="751.9656"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;stroke-dasharray:5.0,5.0;" x1="1668" x2="1668" y1="35.8438" y2="751.9656"/><text fill="#000000" font-family="sans-serif" font-size="5.6" lengthAdjust="spacing" textLength="14.4" x="8" y="34.6133">Client</text><ellipse cx="16.4" cy="6" fill="#FEFECE" filter="url(#f28socyf77bbx)" rx="3.2" ry="3.2" style="stroke:#A80036;stroke-width:0.8000000000000002;"/><path d="M16.4,9.2 L16.4,20 M11.2,12.4 L21.6,12.4 M16.4,20 L11.2,26 M16.4,20 L21.6,26 " fill="none" filter="url(#f28socyf77bbx)" style="stroke:#A80036;stroke-width:0.8000000000000002;"/><text fill="#000000" font-family="sans-serif" font-size="5.6" lengthAdjust="spacing" textLength="14.4" x="8" y="757.3789">Client</text><ellipse cx="16.4" cy="762.6094" fill="#FEFECE" filter="url(#f28socyf77bbx)" rx="3.2" ry="3.2" style="stroke:#A80036;stroke-width:0.8000000000000002;"/><path d="M16.4,765.8094 L16.4,776.6094 M11.2,769.0094 L21.6,769.0094 M16.4,776.6094 L11.2,782.6094 M16.4,776.6094 L21.6,782.6094 " fill="none" filter="url(#f28socyf77bbx)" style="stroke:#A80036;stroke-width:0.8000000000000002;"/><rect fill="#FEFECE" filter="url(#f28socyf77bbx)" height="19.6875" style="stroke:#A80036;stroke-width:0.6000000000000001;" width="64.4" x="122.2" y="14.1563"/><text fill="#000000" font-family="sans-serif" font-size="5.6" font-style="italic" lengthAdjust="spacing" textLength="38" x="135.4" y="22.7695">«presentation»</text><text fill="#000000" font-family="sans-serif" font-size="5.6" lengthAdjust="spacing" textLength="58.8" x="125" y="29.8133">AnswerQuestionnaireUI</text><rect fill="#FEFECE" filter="url(#f28socyf77bbx)" height="19.6875" style="stroke:#A80036;stroke-width:0.6000000000000001;" width="64.4" x="122.2" y="751.5656"/><text fill="#000000" font-family="sans-serif" font-size="5.6" font-style="italic" lengthAdjust="spacing" textLength="38" x="135.4" y="760.1789">«presentation»</text><text fill="#000000" font-family="sans-serif" font-size="5.6" lengthAdjust="spacing" textLength="58.8" x="125" y="767.2227">AnswerQuestionnaireUI</text><rect fill="#FEFECE" filter="url(#f28socyf77bbx)" height="19.6875" style="stroke:#A80036;stroke-width:0.6000000000000001;" width="84.4" x="293.4" y="14.1563"/><text fill="#000000" font-family="sans-serif" font-size="5.6" font-style="italic" lengthAdjust="spacing" textLength="33.6" x="318.8" y="22.7695">«application»</text><text fill="#000000" font-family="sans-serif" font-size="5.6" lengthAdjust="spacing" textLength="78.8" x="296.2" y="29.8133">AnswerQuestionnaireController</text><rect fill="#FEFECE" filter="url(#f28socyf77bbx)" height="19.6875" style="stroke:#A80036;stroke-width:0.6000000000000001;" width="84.4" x="293.4" y="751.5656"/><text fill="#000000" font-family="sans-serif" font-size="5.6" font-style="italic" lengthAdjust="spacing" textLength="33.6" x="318.8" y="760.1789">«application»</text><text fill="#000000" font-family="sans-serif" font-size="5.6" lengthAdjust="spacing" textLength="78.8" x="296.2" y="767.2227">AnswerQuestionnaireController</text><rect fill="#FEFECE" filter="url(#f28socyf77bbx)" height="19.6875" style="stroke:#A80036;stroke-width:0.6000000000000001;" width="78.4" x="428.4" y="14.1563"/><text fill="#000000" font-family="sans-serif" font-size="5.6" font-style="italic" lengthAdjust="spacing" textLength="33.6" x="450.8" y="22.7695">«application»</text><text fill="#000000" font-family="sans-serif" font-size="5.6" lengthAdjust="spacing" textLength="72.8" x="431.2" y="29.8133">AnswerQuestionnaireService</text><rect fill="#FEFECE" filter="url(#f28socyf77bbx)" height="19.6875" style="stroke:#A80036;stroke-width:0.6000000000000001;" width="78.4" x="428.4" y="751.5656"/><text fill="#000000" font-family="sans-serif" font-size="5.6" font-style="italic" lengthAdjust="spacing" textLength="33.6" x="450.8" y="760.1789">«application»</text><text fill="#000000" font-family="sans-serif" font-size="5.6" lengthAdjust="spacing" textLength="72.8" x="431.2" y="767.2227">AnswerQuestionnaireService</text><rect fill="#FEFECE" filter="url(#f28socyf77bbx)" height="12.6438" style="stroke:#A80036;stroke-width:0.6000000000000001;" width="38.4" x="580.4" y="21.2"/><text fill="#000000" font-family="sans-serif" font-size="5.6" lengthAdjust="spacing" textLength="32.8" x="583.2" y="29.8133">TcpOrderSrv</text><rect fill="#FEFECE" filter="url(#f28socyf77bbx)" height="12.6438" style="stroke:#A80036;stroke-width:0.6000000000000001;" width="38.4" x="580.4" y="751.5656"/><text fill="#000000" font-family="sans-serif" font-size="5.6" lengthAdjust="spacing" textLength="32.8" x="583.2" y="760.1789">TcpOrderSrv</text><rect fill="#FEFECE" filter="url(#f28socyf77bbx)" height="12.6438" style="stroke:#A80036;stroke-width:0.6000000000000001;" width="76.8" x="774" y="21.2"/><text fill="#000000" font-family="sans-serif" font-size="5.6" lengthAdjust="spacing" textLength="71.2" x="776.8" y="29.8133">OrderServerMessageParser</text><rect fill="#FEFECE" filter="url(#f28socyf77bbx)" height="12.6438" style="stroke:#A80036;stroke-width:0.6000000000000001;" width="76.8" x="774" y="751.5656"/><text fill="#000000" font-family="sans-serif" font-size="5.6" lengthAdjust="spacing" textLength="71.2" x="776.8" y="760.1789">OrderServerMessageParser</text><rect fill="#FEFECE" filter="url(#f28socyf77bbx)" height="12.6438" style="stroke:#A80036;stroke-width:0.6000000000000001;" width="58.4" x="1027.2" y="21.2"/><text fill="#000000" font-family="sans-serif" font-size="5.6" lengthAdjust="spacing" textLength="52.8" x="1030" y="29.8133">OrderServerRequest</text><rect fill="#FEFECE" filter="url(#f28socyf77bbx)" height="12.6438" style="stroke:#A80036;stroke-width:0.6000000000000001;" width="58.4" x="1027.2" y="751.5656"/><text fill="#000000" font-family="sans-serif" font-size="5.6" lengthAdjust="spacing" textLength="52.8" x="1030" y="760.1789">OrderServerRequest</text><rect fill="#FEFECE" filter="url(#f28socyf77bbx)" height="19.6875" style="stroke:#A80036;stroke-width:0.6000000000000001;" width="53.6" x="1177.2" y="14.1563"/><text fill="#000000" font-family="sans-serif" font-size="5.6" font-style="italic" lengthAdjust="spacing" textLength="33.6" x="1187.2" y="22.7695">«application»</text><text fill="#000000" font-family="sans-serif" font-size="5.6" lengthAdjust="spacing" textLength="48" x="1180" y="29.8133">OrderSrvController</text><rect fill="#FEFECE" filter="url(#f28socyf77bbx)" height="19.6875" style="stroke:#A80036;stroke-width:0.6000000000000001;" width="53.6" x="1177.2" y="751.5656"/><text fill="#000000" font-family="sans-serif" font-size="5.6" font-style="italic" lengthAdjust="spacing" textLength="33.6" x="1187.2" y="760.1789">«application»</text><text fill="#000000" font-family="sans-serif" font-size="5.6" lengthAdjust="spacing" textLength="48" x="1180" y="767.2227">OrderSrvController</text><rect fill="#FEFECE" filter="url(#f28socyf77bbx)" height="19.6875" style="stroke:#A80036;stroke-width:0.6000000000000001;" width="30.4" x="1236.4" y="14.1563"/><text fill="#000000" font-family="sans-serif" font-size="5.6" font-style="italic" lengthAdjust="spacing" textLength="24.8" x="1239.2" y="22.7695">«domain»</text><text fill="#000000" font-family="sans-serif" font-size="5.6" lengthAdjust="spacing" textLength="14.4" x="1244.4" y="29.8133">Client</text><rect fill="#FEFECE" filter="url(#f28socyf77bbx)" height="19.6875" style="stroke:#A80036;stroke-width:0.6000000000000001;" width="30.4" x="1236.4" y="751.5656"/><text fill="#000000" font-family="sans-serif" font-size="5.6" font-style="italic" lengthAdjust="spacing" textLength="24.8" x="1239.2" y="760.1789">«domain»</text><text fill="#000000" font-family="sans-serif" font-size="5.6" lengthAdjust="spacing" textLength="14.4" x="1244.4" y="767.2227">Client</text><rect fill="#FEFECE" filter="url(#f28socyf77bbx)" height="19.6875" style="stroke:#A80036;stroke-width:0.6000000000000001;" width="41.2" x="1272.4" y="14.1563"/><text fill="#000000" font-family="sans-serif" font-size="5.6" font-style="italic" lengthAdjust="spacing" textLength="24.8" x="1280.6" y="22.7695">«domain»</text><text fill="#000000" font-family="sans-serif" font-size="5.6" lengthAdjust="spacing" textLength="35.6" x="1275.2" y="29.8133">Questionnaire</text><rect fill="#FEFECE" filter="url(#f28socyf77bbx)" height="19.6875" style="stroke:#A80036;stroke-width:0.6000000000000001;" width="41.2" x="1272.4" y="751.5656"/><text fill="#000000" font-family="sans-serif" font-size="5.6" font-style="italic" lengthAdjust="spacing" textLength="24.8" x="1280.6" y="760.1789">«domain»</text><text fill="#000000" font-family="sans-serif" font-size="5.6" lengthAdjust="spacing" textLength="35.6" x="1275.2" y="767.2227">Questionnaire</text><rect fill="#FEFECE" filter="url(#f28socyf77bbx)" height="19.6875" style="stroke:#A80036;stroke-width:0.6000000000000001;" width="30.4" x="1319.2" y="14.1563"/><text fill="#000000" font-family="sans-serif" font-size="5.6" font-style="italic" lengthAdjust="spacing" textLength="24.8" x="1322" y="22.7695">«domain»</text><text fill="#000000" font-family="sans-serif" font-size="5.6" lengthAdjust="spacing" textLength="18.4" x="1325.2" y="29.8133">Answer</text><rect fill="#FEFECE" filter="url(#f28socyf77bbx)" height="19.6875" style="stroke:#A80036;stroke-width:0.6000000000000001;" width="30.4" x="1319.2" y="751.5656"/><text fill="#000000" font-family="sans-serif" font-size="5.6" font-style="italic" lengthAdjust="spacing" textLength="24.8" x="1322" y="760.1789">«domain»</text><text fill="#000000" font-family="sans-serif" font-size="5.6" lengthAdjust="spacing" textLength="18.4" x="1325.2" y="767.2227">Answer</text><rect fill="#FEFECE" filter="url(#f28socyf77bbx)" height="19.6875" style="stroke:#A80036;stroke-width:0.6000000000000001;" width="54.4" x="1355.2" y="14.1563"/><text fill="#000000" font-family="sans-serif" font-size="5.6" font-style="italic" lengthAdjust="spacing" textLength="35.6" x="1364.6" y="22.7695">«persistence»</text><text fill="#000000" font-family="sans-serif" font-size="5.6" lengthAdjust="spacing" textLength="48.8" x="1358" y="29.8133">PersistenceContext</text><rect fill="#FEFECE" filter="url(#f28socyf77bbx)" height="19.6875" style="stroke:#A80036;stroke-width:0.6000000000000001;" width="54.4" x="1355.2" y="751.5656"/><text fill="#000000" font-family="sans-serif" font-size="5.6" font-style="italic" lengthAdjust="spacing" textLength="35.6" x="1364.6" y="760.1789">«persistence»</text><text fill="#000000" font-family="sans-serif" font-size="5.6" lengthAdjust="spacing" textLength="48.8" x="1358" y="767.2227">PersistenceContext</text><rect fill="#FEFECE" filter="url(#f28socyf77bbx)" height="19.6875" style="stroke:#A80036;stroke-width:0.6000000000000001;" width="52" x="1415.2" y="14.1563"/><text fill="#000000" font-family="sans-serif" font-size="5.6" font-style="italic" lengthAdjust="spacing" textLength="23.6" x="1429.4" y="22.7695">«factory»</text><text fill="#000000" font-family="sans-serif" font-size="5.6" lengthAdjust="spacing" textLength="46.4" x="1418" y="29.8133">RepositoryFactory</text><rect fill="#FEFECE" filter="url(#f28socyf77bbx)" height="19.6875" style="stroke:#A80036;stroke-width:0.6000000000000001;" width="52" x="1415.2" y="751.5656"/><text fill="#000000" font-family="sans-serif" font-size="5.6" font-style="italic" lengthAdjust="spacing" textLength="23.6" x="1429.4" y="760.1789">«factory»</text><text fill="#000000" font-family="sans-serif" font-size="5.6" lengthAdjust="spacing" textLength="46.4" x="1418" y="767.2227">RepositoryFactory</text><text fill="#000000" font-family="sans-serif" font-size="5.6" font-style="italic" lengthAdjust="spacing" textLength="31.6" x="1496.6" y="27.5695">«repository»</text><text fill="#000000" font-family="sans-serif" font-size="5.6" lengthAdjust="spacing" textLength="79.2" x="1472.8" y="34.6133">SurveyQuestionnareRepository</text><path d="M1506.4,7.3563 C1506.4,3.3563 1513.6,3.3563 1513.6,3.3563 C1513.6,3.3563 1520.8,3.3563 1520.8,7.3563 L1520.8,17.7563 C1520.8,21.7563 1513.6,21.7563 1513.6,21.7563 C1513.6,21.7563 1506.4,21.7563 1506.4,17.7563 L1506.4,7.3563 " fill="#FEFECE" filter="url(#f28socyf77bbx)" style="stroke:#000000;stroke-width:0.6000000000000001;"/><path d="M1506.4,7.3563 C1506.4,11.3563 1513.6,11.3563 1513.6,11.3563 C1513.6,11.3563 1520.8,11.3563 1520.8,7.3563 " fill="none" style="stroke:#000000;stroke-width:0.6000000000000001;"/><text fill="#000000" font-family="sans-serif" font-size="5.6" font-style="italic" lengthAdjust="spacing" textLength="31.6" x="1496.6" y="757.3789">«repository»</text><text fill="#000000" font-family="sans-serif" font-size="5.6" lengthAdjust="spacing" textLength="79.2" x="1472.8" y="764.4227">SurveyQuestionnareRepository</text><path d="M1506.4,769.6531 C1506.4,765.6531 1513.6,765.6531 1513.6,765.6531 C1513.6,765.6531 1520.8,765.6531 1520.8,769.6531 L1520.8,780.0531 C1520.8,784.0531 1513.6,784.0531 1513.6,784.0531 C1513.6,784.0531 1506.4,784.0531 1506.4,780.0531 L1506.4,769.6531 " fill="#FEFECE" filter="url(#f28socyf77bbx)" style="stroke:#000000;stroke-width:0.6000000000000001;"/><path d="M1506.4,769.6531 C1506.4,773.6531 1513.6,773.6531 1513.6,773.6531 C1513.6,773.6531 1520.8,773.6531 1520.8,769.6531 " fill="none" style="stroke:#000000;stroke-width:0.6000000000000001;"/><text fill="#000000" font-family="sans-serif" font-size="5.6" font-style="italic" lengthAdjust="spacing" textLength="31.6" x="1583.2" y="27.5695">«repository»</text><text fill="#000000" font-family="sans-serif" font-size="5.6" lengthAdjust="spacing" textLength="81.2" x="1558.4" y="34.6133">AnswerQuestionnaireRepository</text><path d="M1593,7.3563 C1593,3.3563 1600.2,3.3563 1600.2,3.3563 C1600.2,3.3563 1607.4,3.3563 1607.4,7.3563 L1607.4,17.7563 C1607.4,21.7563 1600.2,21.7563 1600.2,21.7563 C1600.2,21.7563 1593,21.7563 1593,17.7563 L1593,7.3563 " fill="#FEFECE" filter="url(#f28socyf77bbx)" style="stroke:#000000;stroke-width:0.6000000000000001;"/><path d="M1593,7.3563 C1593,11.3563 1600.2,11.3563 1600.2,11.3563 C1600.2,11.3563 1607.4,11.3563 1607.4,7.3563 " fill="none" style="stroke:#000000;stroke-width:0.6000000000000001;"/><text fill="#000000" font-family="sans-serif" font-size="5.6" font-style="italic" lengthAdjust="spacing" textLength="31.6" x="1583.2" y="757.3789">«repository»</text><text fill="#000000" font-family="sans-serif" font-size="5.6" lengthAdjust="spacing" textLength="81.2" x="1558.4" y="764.4227">AnswerQuestionnaireRepository</text><path d="M1593,769.6531 C1593,765.6531 1600.2,765.6531 1600.2,765.6531 C1600.2,765.6531 1607.4,765.6531 1607.4,769.6531 L1607.4,780.0531 C1607.4,784.0531 1600.2,784.0531 1600.2,784.0531 C1600.2,784.0531 1593,784.0531 1593,780.0531 L1593,769.6531 " fill="#FEFECE" filter="url(#f28socyf77bbx)" style="stroke:#000000;stroke-width:0.6000000000000001;"/><path d="M1593,769.6531 C1593,773.6531 1600.2,773.6531 1600.2,773.6531 C1600.2,773.6531 1607.4,773.6531 1607.4,769.6531 " fill="none" style="stroke:#000000;stroke-width:0.6000000000000001;"/><text fill="#000000" font-family="sans-serif" font-size="5.6" font-style="italic" lengthAdjust="spacing" textLength="31.6" x="1651" y="27.5695">«repository»</text><text fill="#000000" font-family="sans-serif" font-size="5.6" lengthAdjust="spacing" textLength="41.6" x="1646" y="34.6133">ClientRepository</text><path d="M1660.8,7.3563 C1660.8,3.3563 1668,3.3563 1668,3.3563 C1668,3.3563 1675.2,3.3563 1675.2,7.3563 L1675.2,17.7563 C1675.2,21.7563 1668,21.7563 1668,21.7563 C1668,21.7563 1660.8,21.7563 1660.8,17.7563 L1660.8,7.3563 " fill="#FEFECE" filter="url(#f28socyf77bbx)" style="stroke:#000000;stroke-width:0.6000000000000001;"/><path d="M1660.8,7.3563 C1660.8,11.3563 1668,11.3563 1668,11.3563 C1668,11.3563 1675.2,11.3563 1675.2,7.3563 " fill="none" style="stroke:#000000;stroke-width:0.6000000000000001;"/><text fill="#000000" font-family="sans-serif" font-size="5.6" font-style="italic" lengthAdjust="spacing" textLength="31.6" x="1651" y="757.3789">«repository»</text><text fill="#000000" font-family="sans-serif" font-size="5.6" lengthAdjust="spacing" textLength="41.6" x="1646" y="764.4227">ClientRepository</text><path d="M1660.8,769.6531 C1660.8,765.6531 1668,765.6531 1668,765.6531 C1668,765.6531 1675.2,765.6531 1675.2,769.6531 L1675.2,780.0531 C1675.2,784.0531 1668,784.0531 1668,784.0531 C1668,784.0531 1660.8,784.0531 1660.8,780.0531 L1660.8,769.6531 " fill="#FEFECE" filter="url(#f28socyf77bbx)" style="stroke:#000000;stroke-width:0.6000000000000001;"/><path d="M1660.8,769.6531 C1660.8,773.6531 1668,773.6531 1668,773.6531 C1668,773.6531 1675.2,773.6531 1675.2,769.6531 " fill="none" style="stroke:#000000;stroke-width:0.6000000000000001;"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="708.5219" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="14.4" y="39.8438"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="12.1406" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="153.2" y="63.9938"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="323.375" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="153.2" y="88.275"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="11.2" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="155.2" y="375.3688"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="320.975" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="153.2" y="423.7906"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="256.8125" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="334.4" y="100.4156"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="293.8938" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="334.4" y="438.7313"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="244.6719" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="466.4" y="112.5563"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="281.7531" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="466.4" y="450.8719"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="232.5313" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="598.4" y="124.6969"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="269.6125" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="598.4" y="463.0125"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="36.4219" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="811.2" y="136.8375"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="36.4219" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="811.2" y="475.1531"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="12.1406" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="1055.2" y="148.9781"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="145.6875" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="1055.2" y="211.5406"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="12.1406" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="1055.2" y="487.2938"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="182.7688" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="1055.2" y="549.8563"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="133.5469" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="1202.8" y="223.6813"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="170.6281" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="1202.8" y="561.9969"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="12.1406" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="1333.2" y="632.8406"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="12.1406" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="1511.6" y="235.8219"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="12.1406" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="1511.6" y="574.1375"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="12.1406" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="1598.2" y="284.3844"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="12" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="1598.2" y="657.1219"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="12.1406" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="1666" y="260.1031"/><rect fill="#FFFFFF" filter="url(#f28socyf77bbx)" height="12.1406" style="stroke:#A80036;stroke-width:0.4000000000000001;" width="4" x="1666" y="598.4188"/><path d="M4,42.6438 L33.2,42.6438 L33.2,45.8438 L29.2,49.8438 L4,49.8438 L4,42.6438 " fill="#EEEEEE" style="stroke:#000000;stroke-width:0.4000000000000001;"/><rect fill="none" height="317.7844" style="stroke:#000000;stroke-width:0.8000000000000002;" width="1690" x="4" y="42.6438"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="11.2" x="10" y="48.4418">loop</text><text fill="#000000" font-family="sans-serif" font-size="4.4" font-weight="bold" lengthAdjust="spacing" textLength="90" x="39.2" y="48.0113">[enquanto não escolher um questionário</text><text fill="#000000" font-family="sans-serif" font-size="4.4" font-weight="bold" lengthAdjust="spacing" textLength="72.4" x="40.4" y="53.5457">que ainda não tenha respondido]</text><polygon fill="#A80036" points="148.4,62.3938,152.4,63.9938,148.4,65.5938,150,63.9938" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;" x1="18.4" x2="150.8" y1="63.9938" y2="63.9938"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="2.8" x="21.2" y="62.0512">1</text><text fill="#000000" font-family="sans-serif" font-size="5.2" lengthAdjust="spacing" textLength="113.6" x="25.6" y="62.0512">inicia o processo de responder a um questionário</text><polygon fill="#A80036" points="22.8,74.5344,18.8,76.1344,22.8,77.7344,21.2,76.1344" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;stroke-dasharray:2.0,2.0;" x1="20.4" x2="154.8" y1="76.1344" y2="76.1344"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="2.8" x="25.2" y="74.1918">2</text><text fill="#000000" font-family="sans-serif" font-size="5.2" lengthAdjust="spacing" textLength="120.8" x="29.6" y="74.1918">mostra a lista de questionarios apropriada ao cliente</text><polygon fill="#A80036" points="148.4,86.675,152.4,88.275,148.4,89.875,150,88.275" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;" x1="18.4" x2="150.8" y1="88.275" y2="88.275"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="2.8" x="21.2" y="86.3324">3</text><text fill="#000000" font-family="sans-serif" font-size="5.2" lengthAdjust="spacing" textLength="81.6" x="25.6" y="86.3324">seleciona o questionario pretendido</text><polygon fill="#A80036" points="329.6,98.8156,333.6,100.4156,329.6,102.0156,331.2,100.4156" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;" x1="157.2" x2="332" y1="100.4156" y2="100.4156"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="2.8" x="160" y="98.473">4</text><text fill="#000000" font-family="sans-serif" font-size="5.2" lengthAdjust="spacing" textLength="78.4" x="164.4" y="98.473">verifyIfClientAnswered(surveyDTO)</text><polygon fill="#A80036" points="461.6,110.9563,465.6,112.5563,461.6,114.1563,463.2,112.5563" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;" x1="338.4" x2="464" y1="112.5563" y2="112.5563"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="2.8" x="341.2" y="110.6137">5</text><text fill="#000000" font-family="sans-serif" font-size="5.2" lengthAdjust="spacing" textLength="103.2" x="345.6" y="110.6137">verifyIfClientHasAnswered(email, surveyDTO)</text><polygon fill="#A80036" points="593.6,123.0969,597.6,124.6969,593.6,126.2969,595.2,124.6969" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;" x1="470.4" x2="596" y1="124.6969" y2="124.6969"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="2.8" x="473.2" y="122.7543">6</text><text fill="#000000" font-family="sans-serif" font-size="5.2" lengthAdjust="spacing" textLength="103.2" x="477.6" y="122.7543">verifyIfClientHasAnswered(email, surveyDTO)</text><polygon fill="#A80036" points="806.4,135.2375,810.4,136.8375,806.4,138.4375,808,136.8375" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;" x1="602.4" x2="808.8" y1="136.8375" y2="136.8375"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="2.8" x="605.2" y="134.8949">7</text><text fill="#000000" font-family="sans-serif" font-size="5.2" lengthAdjust="spacing" textLength="194" x="609.6" y="134.8949">parse(messageRequest, sOutputObject, sIn, sOut, clientMessageUS, sInputObject)</text><polygon fill="#A80036" points="1050.4,147.3781,1054.4,148.9781,1050.4,150.5781,1052,148.9781" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;" x1="815.2" x2="1052.8" y1="148.9781" y2="148.9781"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="2.8" x="818" y="147.0355">8</text><text fill="#000000" font-family="sans-serif" font-size="5.2" lengthAdjust="spacing" textLength="225.2" x="822.4" y="147.0355">create(orderSrvController, messageRequest, sOutObject, sIn, sOut, clientMessageUS, sInObject)</text><polygon fill="#A80036" points="819.6,159.5188,815.6,161.1188,819.6,162.7188,818,161.1188" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;stroke-dasharray:2.0,2.0;" x1="817.2" x2="1056.8" y1="161.1188" y2="161.1188"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="2.8" x="822" y="159.1762">9</text><text fill="#000000" font-family="sans-serif" font-size="5.2" lengthAdjust="spacing" textLength="30.8" x="826.4" y="159.1762">orderRequest</text><polygon fill="#A80036" points="606.8,171.6594,602.8,173.2594,606.8,174.8594,605.2,173.2594" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;stroke-dasharray:2.0,2.0;" x1="604.4" x2="812.8" y1="173.2594" y2="173.2594"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="609.2" y="171.3168">10</text><text fill="#000000" font-family="sans-serif" font-size="5.2" lengthAdjust="spacing" textLength="30.8" x="616.4" y="171.3168">orderRequest</text><path d="M604.4,188.4594 L604.4,198.8594 L637.2,198.8594 L637.2,192.4594 L633.2,188.4594 L604.4,188.4594 " fill="#FBFB77" filter="url(#f28socyf77bbx)" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><path d="M633.2,188.4594 L633.2,192.4594 L637.2,192.4594 L633.2,188.4594 " fill="#FBFB77" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><text fill="#000000" font-family="sans-serif" font-size="5.2" lengthAdjust="spacing" textLength="17.2" x="606.8" y="195.8574">request</text><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="625.6" y="195.8574">16</text><polygon fill="#A80036" points="1050.4,209.9406,1054.4,211.5406,1050.4,213.1406,1052,211.5406" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;" x1="602.4" x2="1052.8" y1="211.5406" y2="211.5406"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="605.2" y="209.598">11</text><text fill="#000000" font-family="sans-serif" font-size="5.2" lengthAdjust="spacing" textLength="21.6" x="612.4" y="209.598">execute()</text><polygon fill="#A80036" points="1198,222.0813,1202,223.6813,1198,225.2813,1199.6,223.6813" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;" x1="1059.2" x2="1200.4" y1="223.6813" y2="223.6813"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="1062" y="221.7387">12</text><text fill="#000000" font-family="sans-serif" font-size="5.2" lengthAdjust="spacing" textLength="95.6" x="1069.2" y="221.7387">verifyIfClientAnswered(email, surveyCode)</text><polygon fill="#A80036" points="1506.8,234.2219,1510.8,235.8219,1506.8,237.4219,1508.4,235.8219" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;" x1="1206.8" x2="1509.2" y1="235.8219" y2="235.8219"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="1209.6" y="233.8793">13</text><text fill="#000000" font-family="sans-serif" font-size="5.2" lengthAdjust="spacing" textLength="50.8" x="1216.8" y="233.8793">ofIdentity(surveyCode)</text><polygon fill="#A80036" points="1211.2,246.3625,1207.2,247.9625,1211.2,249.5625,1209.6,247.9625" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;stroke-dasharray:2.0,2.0;" x1="1208.8" x2="1513.2" y1="247.9625" y2="247.9625"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="1213.6" y="246.0199">14</text><text fill="#000000" font-family="sans-serif" font-size="5.2" lengthAdjust="spacing" textLength="14.8" x="1220.8" y="246.0199">survey</text><polygon fill="#A80036" points="1661.2,258.5031,1665.2,260.1031,1661.2,261.7031,1662.8,260.1031" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;" x1="1206.8" x2="1663.6" y1="260.1031" y2="260.1031"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="1209.6" y="258.1605">15</text><text fill="#000000" font-family="sans-serif" font-size="5.2" lengthAdjust="spacing" textLength="43.2" x="1216.8" y="258.1605">findByEmail(email)</text><polygon fill="#A80036" points="1211.2,270.6438,1207.2,272.2438,1211.2,273.8438,1209.6,272.2438" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;stroke-dasharray:2.0,2.0;" x1="1208.8" x2="1667.6" y1="272.2438" y2="272.2438"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="1213.6" y="270.3012">16</text><text fill="#000000" font-family="sans-serif" font-size="5.2" lengthAdjust="spacing" textLength="28" x="1220.8" y="270.3012">clientSurvey</text><polygon fill="#A80036" points="1593.4,282.7844,1597.4,284.3844,1593.4,285.9844,1595,284.3844" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;" x1="1206.8" x2="1595.8" y1="284.3844" y2="284.3844"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="1209.6" y="282.4418">17</text><text fill="#000000" font-family="sans-serif" font-size="5.2" lengthAdjust="spacing" textLength="81.2" x="1216.8" y="282.4418">findAnswersByClient(client, survey)</text><polygon fill="#A80036" points="1211.2,294.925,1207.2,296.525,1211.2,298.125,1209.6,296.525" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;stroke-dasharray:2.0,2.0;" x1="1208.8" x2="1599.8" y1="296.525" y2="296.525"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="1213.6" y="294.5824">18</text><text fill="#000000" font-family="sans-serif" font-size="5.2" lengthAdjust="spacing" textLength="19.2" x="1220.8" y="294.5824">answers</text><polygon fill="#A80036" points="1063.6,307.0656,1059.6,308.6656,1063.6,310.2656,1062,308.6656" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;stroke-dasharray:2.0,2.0;" x1="1061.2" x2="1202.4" y1="308.6656" y2="308.6656"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="1066" y="306.723">19</text><text fill="#000000" font-family="sans-serif" font-size="5.2" lengthAdjust="spacing" textLength="39.2" x="1073.2" y="306.723">hasNotAnswered</text><polygon fill="#A80036" points="606.8,319.2063,602.8,320.8063,606.8,322.4063,605.2,320.8063" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;stroke-dasharray:2.0,2.0;" x1="604.4" x2="1054.8" y1="320.8063" y2="320.8063"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="609.2" y="318.8637">20</text><text fill="#000000" font-family="sans-serif" font-size="5.2" lengthAdjust="spacing" textLength="39.2" x="616.4" y="318.8637">hasNotAnswered</text><polygon fill="#A80036" points="474.8,331.3469,470.8,332.9469,474.8,334.5469,473.2,332.9469" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;stroke-dasharray:2.0,2.0;" x1="472.4" x2="598" y1="332.9469" y2="332.9469"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="477.2" y="331.0043">21</text><text fill="#000000" font-family="sans-serif" font-size="5.2" lengthAdjust="spacing" textLength="39.2" x="484.4" y="331.0043">hasNotAnswered</text><polygon fill="#A80036" points="342.8,343.4875,338.8,345.0875,342.8,346.6875,341.2,345.0875" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;stroke-dasharray:2.0,2.0;" x1="340.4" x2="466" y1="345.0875" y2="345.0875"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="345.2" y="343.1449">22</text><text fill="#000000" font-family="sans-serif" font-size="5.2" lengthAdjust="spacing" textLength="39.2" x="352.4" y="343.1449">hasNotAnswered</text><polygon fill="#A80036" points="161.6,355.6281,157.6,357.2281,161.6,358.8281,160,357.2281" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;stroke-dasharray:2.0,2.0;" x1="159.2" x2="336" y1="357.2281" y2="357.2281"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="164" y="355.2855">23</text><text fill="#000000" font-family="sans-serif" font-size="5.2" lengthAdjust="spacing" textLength="39.2" x="171.2" y="355.2855">hasNotAnswered</text><line style="stroke:#A80036;stroke-width:0.4000000000000001;" x1="159.2" x2="176" y1="372.1688" y2="372.1688"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;" x1="176" x2="176" y1="372.1688" y2="377.3688"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;" x1="159.6" x2="176" y1="377.3688" y2="377.3688"/><polygon fill="#A80036" points="163.6,375.7688,159.6,377.3688,163.6,378.9688,162,377.3688" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="162" y="370.2262">24</text><text fill="#000000" font-family="sans-serif" font-size="5.2" lengthAdjust="spacing" textLength="164.4" x="169.2" y="370.2262">validAnswers = parseSurveyAnswersWithVisitor(surveyString, answers)</text><path d="M4,395.3688 L33.2,395.3688 L33.2,398.5688 L29.2,402.5688 L4,402.5688 L4,395.3688 " fill="#EEEEEE" style="stroke:#000000;stroke-width:0.4000000000000001;"/><rect fill="none" height="31.6219" style="stroke:#000000;stroke-width:0.8000000000000002;" width="188.2" x="4" y="395.3688"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="11.2" x="10" y="401.1668">loop</text><text fill="#000000" font-family="sans-serif" font-size="4.4" font-weight="bold" lengthAdjust="spacing" textLength="90.8" x="39.2" y="400.7363">[enquanto o questionário tiver questões]</text><polygon fill="#A80036" points="22.8,410.05,18.8,411.65,22.8,413.25,21.2,411.65" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;stroke-dasharray:2.0,2.0;" x1="20.4" x2="154.8" y1="411.65" y2="411.65"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="25.2" y="409.7074">25</text><text fill="#000000" font-family="sans-serif" font-size="5.2" lengthAdjust="spacing" textLength="47.2" x="32.4" y="409.7074">apresenta a questão</text><polygon fill="#A80036" points="148.4,422.1906,152.4,423.7906,148.4,425.3906,150,423.7906" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;" x1="18.4" x2="150.8" y1="423.7906" y2="423.7906"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="21.2" y="421.848">26</text><text fill="#000000" font-family="sans-serif" font-size="5.2" lengthAdjust="spacing" textLength="45.6" x="28.4" y="421.848">responde à questão</text><polygon fill="#A80036" points="329.6,437.1313,333.6,438.7313,329.6,440.3313,331.2,438.7313" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;" x1="157.2" x2="332" y1="438.7313" y2="438.7313"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="160" y="436.7887">27</text><text fill="#000000" font-family="sans-serif" font-size="5.2" lengthAdjust="spacing" textLength="108" x="167.2" y="436.7887">sendAnswersToBeSaved(answers, surveyDTO)</text><polygon fill="#A80036" points="461.6,449.2719,465.6,450.8719,461.6,452.4719,463.2,450.8719" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;" x1="338.4" x2="464" y1="450.8719" y2="450.8719"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="341.2" y="448.9293">28</text><text fill="#000000" font-family="sans-serif" font-size="5.2" lengthAdjust="spacing" textLength="113.2" x="348.4" y="448.9293">sendAnswersToBeSaved(answers, survey, email)</text><polygon fill="#A80036" points="593.6,461.4125,597.6,463.0125,593.6,464.6125,595.2,463.0125" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;" x1="470.4" x2="596" y1="463.0125" y2="463.0125"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="473.2" y="461.0699">29</text><text fill="#000000" font-family="sans-serif" font-size="5.2" lengthAdjust="spacing" textLength="113.2" x="480.4" y="461.0699">sendAnswersToBeSaved(answers, survey, email)</text><polygon fill="#A80036" points="806.4,473.5531,810.4,475.1531,806.4,476.7531,808,475.1531" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;" x1="602.4" x2="808.8" y1="475.1531" y2="475.1531"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="605.2" y="473.2105">30</text><text fill="#000000" font-family="sans-serif" font-size="5.2" lengthAdjust="spacing" textLength="194" x="612.4" y="473.2105">parse(messageRequest, sOutputObject, sIn, sOut, clientMessageUS, sInputObject)</text><polygon fill="#A80036" points="1050.4,485.6938,1054.4,487.2938,1050.4,488.8938,1052,487.2938" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;" x1="815.2" x2="1052.8" y1="487.2938" y2="487.2938"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="818" y="485.3512">31</text><text fill="#000000" font-family="sans-serif" font-size="5.2" lengthAdjust="spacing" textLength="225.2" x="825.2" y="485.3512">create(orderSrvController, messageRequest, sOutObject, sIn, sOut, clientMessageUS, sInObject)</text><polygon fill="#A80036" points="819.6,497.8344,815.6,499.4344,819.6,501.0344,818,499.4344" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;stroke-dasharray:2.0,2.0;" x1="817.2" x2="1056.8" y1="499.4344" y2="499.4344"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="822" y="497.4918">32</text><text fill="#000000" font-family="sans-serif" font-size="5.2" lengthAdjust="spacing" textLength="30.8" x="829.2" y="497.4918">orderRequest</text><polygon fill="#A80036" points="606.8,509.975,602.8,511.575,606.8,513.175,605.2,511.575" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;stroke-dasharray:2.0,2.0;" x1="604.4" x2="812.8" y1="511.575" y2="511.575"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="609.2" y="509.6324">33</text><text fill="#000000" font-family="sans-serif" font-size="5.2" lengthAdjust="spacing" textLength="30.8" x="616.4" y="509.6324">orderRequest</text><path d="M604.4,526.775 L604.4,537.175 L637.2,537.175 L637.2,530.775 L633.2,526.775 L604.4,526.775 " fill="#FBFB77" filter="url(#f28socyf77bbx)" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><path d="M633.2,526.775 L633.2,530.775 L637.2,530.775 L633.2,526.775 " fill="#FBFB77" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><text fill="#000000" font-family="sans-serif" font-size="5.2" lengthAdjust="spacing" textLength="17.2" x="606.8" y="534.173">request</text><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="625.6" y="534.173">14</text><polygon fill="#A80036" points="1050.4,548.2563,1054.4,549.8563,1050.4,551.4563,1052,549.8563" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;" x1="602.4" x2="1052.8" y1="549.8563" y2="549.8563"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="605.2" y="547.9137">34</text><text fill="#000000" font-family="sans-serif" font-size="5.2" lengthAdjust="spacing" textLength="21.6" x="612.4" y="547.9137">execute()</text><polygon fill="#A80036" points="1198,560.3969,1202,561.9969,1198,563.5969,1199.6,561.9969" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;" x1="1059.2" x2="1200.4" y1="561.9969" y2="561.9969"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="1062" y="560.0543">35</text><text fill="#000000" font-family="sans-serif" font-size="5.2" lengthAdjust="spacing" textLength="128.8" x="1069.2" y="560.0543">saveQuestionnaireAnswers(answers, surveyDTO, email)</text><polygon fill="#A80036" points="1506.8,572.5375,1510.8,574.1375,1506.8,575.7375,1508.4,574.1375" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;" x1="1206.8" x2="1509.2" y1="574.1375" y2="574.1375"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="1209.6" y="572.1949">36</text><text fill="#000000" font-family="sans-serif" font-size="5.2" lengthAdjust="spacing" textLength="50.8" x="1216.8" y="572.1949">ofIdentity(surveyCode)</text><polygon fill="#A80036" points="1211.2,584.6781,1207.2,586.2781,1211.2,587.8781,1209.6,586.2781" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;stroke-dasharray:2.0,2.0;" x1="1208.8" x2="1513.2" y1="586.2781" y2="586.2781"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="1213.6" y="584.3355">37</text><text fill="#000000" font-family="sans-serif" font-size="5.2" lengthAdjust="spacing" textLength="14.8" x="1220.8" y="584.3355">survey</text><polygon fill="#A80036" points="1661.2,596.8188,1665.2,598.4188,1661.2,600.0188,1662.8,598.4188" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;" x1="1206.8" x2="1663.6" y1="598.4188" y2="598.4188"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="1209.6" y="596.4762">38</text><text fill="#000000" font-family="sans-serif" font-size="5.2" lengthAdjust="spacing" textLength="43.2" x="1216.8" y="596.4762">findByEmail(email)</text><polygon fill="#A80036" points="1211.2,608.9594,1207.2,610.5594,1211.2,612.1594,1209.6,610.5594" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;stroke-dasharray:2.0,2.0;" x1="1208.8" x2="1667.6" y1="610.5594" y2="610.5594"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="1213.6" y="608.6168">39</text><text fill="#000000" font-family="sans-serif" font-size="5.2" lengthAdjust="spacing" textLength="28" x="1220.8" y="608.6168">clientSurvey</text><path d="M1173.2,616.5594 L1202.4,616.5594 L1202.4,619.7594 L1198.4,623.7594 L1173.2,623.7594 L1173.2,616.5594 " fill="#EEEEEE" style="stroke:#000000;stroke-width:0.4000000000000001;"/><rect fill="none" height="55.7625" style="stroke:#000000;stroke-width:0.8000000000000002;" width="472.8" x="1173.2" y="616.5594"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="11.2" x="1179.2" y="622.3574">loop</text><text fill="#000000" font-family="sans-serif" font-size="4.4" font-weight="bold" lengthAdjust="spacing" textLength="85.6" x="1208.4" y="621.927">[enquanto houver answers a persistir]</text><polygon fill="#A80036" points="1328.4,631.2406,1332.4,632.8406,1328.4,634.4406,1330,632.8406" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;" x1="1206.8" x2="1330.8" y1="632.8406" y2="632.8406"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="1209.6" y="630.898">40</text><text fill="#000000" font-family="sans-serif" font-size="5.2" lengthAdjust="spacing" textLength="105.6" x="1216.8" y="630.898">create(survey, client, questionID, listAnswers)</text><polygon fill="#A80036" points="1211.2,643.3813,1207.2,644.9813,1211.2,646.5813,1209.6,644.9813" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;stroke-dasharray:2.0,2.0;" x1="1208.8" x2="1334.8" y1="644.9813" y2="644.9813"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="1213.6" y="643.0387">41</text><text fill="#000000" font-family="sans-serif" font-size="5.2" lengthAdjust="spacing" textLength="16.4" x="1220.8" y="643.0387">answer</text><polygon fill="#A80036" points="1593.4,655.5219,1597.4,657.1219,1593.4,658.7219,1595,657.1219" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;" x1="1206.8" x2="1595.8" y1="657.1219" y2="657.1219"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="1209.6" y="655.1793">42</text><text fill="#000000" font-family="sans-serif" font-size="5.2" lengthAdjust="spacing" textLength="30" x="1216.8" y="655.1793">save(answer)</text><polygon fill="#A80036" points="1063.6,682.4625,1059.6,684.0625,1063.6,685.6625,1062,684.0625" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;stroke-dasharray:2.0,2.0;" x1="1061.2" x2="1202.4" y1="684.0625" y2="684.0625"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="1066" y="682.1199">43</text><text fill="#000000" font-family="sans-serif" font-size="5.2" lengthAdjust="spacing" textLength="19.6" x="1073.2" y="682.1199">success</text><polygon fill="#A80036" points="606.8,694.6031,602.8,696.2031,606.8,697.8031,605.2,696.2031" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;stroke-dasharray:2.0,2.0;" x1="604.4" x2="1054.8" y1="696.2031" y2="696.2031"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="609.2" y="694.2605">44</text><text fill="#000000" font-family="sans-serif" font-size="5.2" lengthAdjust="spacing" textLength="19.6" x="616.4" y="694.2605">success</text><polygon fill="#A80036" points="474.8,706.7438,470.8,708.3438,474.8,709.9438,473.2,708.3438" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;stroke-dasharray:2.0,2.0;" x1="472.4" x2="598" y1="708.3438" y2="708.3438"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="477.2" y="706.4012">45</text><text fill="#000000" font-family="sans-serif" font-size="5.2" lengthAdjust="spacing" textLength="19.6" x="484.4" y="706.4012">success</text><polygon fill="#A80036" points="342.8,718.8844,338.8,720.4844,342.8,722.0844,341.2,720.4844" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;stroke-dasharray:2.0,2.0;" x1="340.4" x2="466" y1="720.4844" y2="720.4844"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="345.2" y="718.5418">46</text><text fill="#000000" font-family="sans-serif" font-size="5.2" lengthAdjust="spacing" textLength="19.6" x="352.4" y="718.5418">success</text><polygon fill="#A80036" points="161.6,731.025,157.6,732.625,161.6,734.225,160,732.625" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;stroke-dasharray:2.0,2.0;" x1="159.2" x2="336" y1="732.625" y2="732.625"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="164" y="730.6824">47</text><text fill="#000000" font-family="sans-serif" font-size="5.2" lengthAdjust="spacing" textLength="19.6" x="171.2" y="730.6824">success</text><polygon fill="#A80036" points="22.8,743.1656,18.8,744.7656,22.8,746.3656,21.2,744.7656" style="stroke:#A80036;stroke-width:0.4000000000000001;"/><line style="stroke:#A80036;stroke-width:0.4000000000000001;stroke-dasharray:2.0,2.0;" x1="20.4" x2="154.8" y1="744.7656" y2="744.7656"/><text fill="#000000" font-family="sans-serif" font-size="5.2" font-weight="bold" lengthAdjust="spacing" textLength="5.6" x="25.2" y="742.823">48</text><text fill="#000000" font-family="sans-serif" font-size="5.2" lengthAdjust="spacing" textLength="72.4" x="32.4" y="742.823">informa o sucesso da operação</text><!--MD5=[558d786c3dd59a6873fb7254aaed73c5]
@startuml

/' FALTA PARTE DE MOSTRAR LISTA APROPRIADA DE QUESTIONARIOS AO CLIENT '/

autonumber
actor "Client" as C

participant AnswerQuestionnaireUI as UI <<presentation>>
participant AnswerQuestionnaireController as CONTROLLER <<application>>
participant AnswerQuestionnaireService as SERVICE <<application>>
participant TcpOrderSrv as ORDER_SERVER
participant OrderServerMessageParser as PARSER
participant OrderServerRequest as ORDER_REQUEST
participant OrderSrvController as ORDER_CONTROLLER <<application>>

participant "Client" as CLIENT <<domain>>
participant "Questionnaire" as QUESTIONNAIRE <<domain>>
participant "Answer" as ANSWER <<domain>>

participant PersistenceContext as PERSISTENCE <<persistence>>
participant RepositoryFactory as FACTORY <<factory>>
database SurveyQuestionnareRepository as SURVEY_REP <<repository>>
database AnswerQuestionnaireRepository as ANSWER_REP <<repository>>
database ClientRepository as CLIENT_REP <<repository>>

loop enquanto não escolher um questionário\n que ainda não tenha respondido
activate C
C -> UI : inicia o processo de responder a um questionário
activate UI
UI - -> C : mostra a lista de questionarios apropriada ao cliente
deactivate UI

C -> UI : seleciona o questionario pretendido
activate UI
UI -> CONTROLLER : verifyIfClientAnswered(surveyDTO)
activate CONTROLLER
CONTROLLER -> SERVICE : verifyIfClientHasAnswered(email, surveyDTO)
activate SERVICE
SERVICE -> ORDER_SERVER : verifyIfClientHasAnswered(email, surveyDTO)
activate ORDER_SERVER

ORDER_SERVER -> PARSER : parse(messageRequest, sOutputObject, sIn, sOut, clientMessageUS, sInputObject)
activate PARSER
PARSER -> ORDER_REQUEST : create(orderSrvController, messageRequest, sOutObject, sIn, sOut, clientMessageUS, sInObject)
activate ORDER_REQUEST
ORDER_REQUEST - -> PARSER : orderRequest
deactivate ORDER_REQUEST
PARSER - -> ORDER_SERVER : orderRequest
deactivate PARSER
|||
note right of ORDER_SERVER
request **16**
end note
ORDER_SERVER -> ORDER_REQUEST : execute()
activate ORDER_REQUEST

ORDER_REQUEST -> ORDER_CONTROLLER : verifyIfClientAnswered(email, surveyCode)
activate ORDER_CONTROLLER
ORDER_CONTROLLER -> SURVEY_REP : ofIdentity(surveyCode)
activate SURVEY_REP
SURVEY_REP - -> ORDER_CONTROLLER : survey
deactivate SURVEY_REP
ORDER_CONTROLLER -> CLIENT_REP : findByEmail(email)
activate CLIENT_REP
CLIENT_REP - -> ORDER_CONTROLLER : clientSurvey
deactivate CLIENT_REP
ORDER_CONTROLLER -> ANSWER_REP : findAnswersByClient(client, survey)
activate ANSWER_REP
ANSWER_REP - -> ORDER_CONTROLLER : answers
deactivate ANSWER_REP

ORDER_CONTROLLER - -> ORDER_REQUEST : hasNotAnswered
ORDER_REQUEST - -> ORDER_SERVER : hasNotAnswered
ORDER_SERVER - -> SERVICE : hasNotAnswered
SERVICE - -> CONTROLLER : hasNotAnswered
CONTROLLER - -> UI : hasNotAnswered

deactivate ORDER_CONTROLLER
deactivate ORDER_REQUEST
deactivate PARSER
deactivate ORDER_SERVER
deactivate SERVICE
deactivate CONTROLLER
end
UI -> UI : validAnswers = parseSurveyAnswersWithVisitor(surveyString, answers)
activate UI
deactivate UI

loop enquanto o questionário tiver questões
UI - -> C : apresenta a questão
deactivate UI
C -> UI : responde à questão
activate UI
end




UI -> CONTROLLER : sendAnswersToBeSaved(answers, surveyDTO)
activate CONTROLLER
CONTROLLER -> SERVICE : sendAnswersToBeSaved(answers, survey, email)
activate SERVICE
SERVICE -> ORDER_SERVER : sendAnswersToBeSaved(answers, survey, email)
activate ORDER_SERVER

ORDER_SERVER -> PARSER : parse(messageRequest, sOutputObject, sIn, sOut, clientMessageUS, sInputObject)
activate PARSER
PARSER -> ORDER_REQUEST : create(orderSrvController, messageRequest, sOutObject, sIn, sOut, clientMessageUS, sInObject)
activate ORDER_REQUEST
ORDER_REQUEST - -> PARSER : orderRequest
deactivate ORDER_REQUEST
PARSER - -> ORDER_SERVER : orderRequest
deactivate PARSER
|||
note right of ORDER_SERVER
request **14**
end note
ORDER_SERVER -> ORDER_REQUEST : execute()
activate ORDER_REQUEST

ORDER_REQUEST -> ORDER_CONTROLLER : saveQuestionnaireAnswers(answers, surveyDTO, email)
activate ORDER_CONTROLLER
ORDER_CONTROLLER -> SURVEY_REP : ofIdentity(surveyCode)
activate SURVEY_REP
SURVEY_REP - -> ORDER_CONTROLLER : survey
deactivate SURVEY_REP
ORDER_CONTROLLER -> CLIENT_REP : findByEmail(email)
activate CLIENT_REP
CLIENT_REP - -> ORDER_CONTROLLER : clientSurvey
deactivate CLIENT_REP
loop enquanto houver answers a persistir
ORDER_CONTROLLER -> ANSWER : create(survey, client, questionID, listAnswers)
activate ANSWER
ANSWER - -> ORDER_CONTROLLER : answer
deactivate ANSWER
ORDER_CONTROLLER -> ANSWER_REP : save(answer)
activate ANSWER_REP
deactivate ANSWER_REP


end

ORDER_CONTROLLER - -> ORDER_REQUEST : success
ORDER_REQUEST - -> ORDER_SERVER : success
ORDER_SERVER - -> SERVICE : success
SERVICE - -> CONTROLLER : success
CONTROLLER - -> UI : success


deactivate ORDER_CONTROLLER
deactivate ORDER_REQUEST
deactivate PARSER
deactivate ORDER_SERVER
deactivate SERVICE
deactivate CONTROLLER



UI - -> C : informa o sucesso da operação
deactivate UI



@enduml

@startuml


autonumber
actor "Client" as C

participant AnswerQuestionnaireUI as UI <<presentation>>
participant AnswerQuestionnaireController as CONTROLLER <<application>>
participant AnswerQuestionnaireService as SERVICE <<application>>
participant TcpOrderSrv as ORDER_SERVER
participant OrderServerMessageParser as PARSER
participant OrderServerRequest as ORDER_REQUEST
participant OrderSrvController as ORDER_CONTROLLER <<application>>

participant "Client" as CLIENT <<domain>>
participant "Questionnaire" as QUESTIONNAIRE <<domain>>
participant "Answer" as ANSWER <<domain>>

participant PersistenceContext as PERSISTENCE <<persistence>>
participant RepositoryFactory as FACTORY <<factory>>
database SurveyQuestionnareRepository as SURVEY_REP <<repository>>
database AnswerQuestionnaireRepository as ANSWER_REP <<repository>>
database ClientRepository as CLIENT_REP <<repository>>

loop enquanto não escolher um questionário\n que ainda não tenha respondido
activate C
C -> UI : inicia o processo de responder a um questionário
activate UI
UI - -> C : mostra a lista de questionarios apropriada ao cliente
deactivate UI

C -> UI : seleciona o questionario pretendido
activate UI
UI -> CONTROLLER : verifyIfClientAnswered(surveyDTO)
activate CONTROLLER
CONTROLLER -> SERVICE : verifyIfClientHasAnswered(email, surveyDTO)
activate SERVICE
SERVICE -> ORDER_SERVER : verifyIfClientHasAnswered(email, surveyDTO)
activate ORDER_SERVER

ORDER_SERVER -> PARSER : parse(messageRequest, sOutputObject, sIn, sOut, clientMessageUS, sInputObject)
activate PARSER
PARSER -> ORDER_REQUEST : create(orderSrvController, messageRequest, sOutObject, sIn, sOut, clientMessageUS, sInObject)
activate ORDER_REQUEST
ORDER_REQUEST - -> PARSER : orderRequest
deactivate ORDER_REQUEST
PARSER - -> ORDER_SERVER : orderRequest
deactivate PARSER
|||
note right of ORDER_SERVER
request **16**
end note
ORDER_SERVER -> ORDER_REQUEST : execute()
activate ORDER_REQUEST

ORDER_REQUEST -> ORDER_CONTROLLER : verifyIfClientAnswered(email, surveyCode)
activate ORDER_CONTROLLER
ORDER_CONTROLLER -> SURVEY_REP : ofIdentity(surveyCode)
activate SURVEY_REP
SURVEY_REP - -> ORDER_CONTROLLER : survey
deactivate SURVEY_REP
ORDER_CONTROLLER -> CLIENT_REP : findByEmail(email)
activate CLIENT_REP
CLIENT_REP - -> ORDER_CONTROLLER : clientSurvey
deactivate CLIENT_REP
ORDER_CONTROLLER -> ANSWER_REP : findAnswersByClient(client, survey)
activate ANSWER_REP
ANSWER_REP - -> ORDER_CONTROLLER : answers
deactivate ANSWER_REP

ORDER_CONTROLLER - -> ORDER_REQUEST : hasNotAnswered
ORDER_REQUEST - -> ORDER_SERVER : hasNotAnswered
ORDER_SERVER - -> SERVICE : hasNotAnswered
SERVICE - -> CONTROLLER : hasNotAnswered
CONTROLLER - -> UI : hasNotAnswered

deactivate ORDER_CONTROLLER
deactivate ORDER_REQUEST
deactivate PARSER
deactivate ORDER_SERVER
deactivate SERVICE
deactivate CONTROLLER
end
UI -> UI : validAnswers = parseSurveyAnswersWithVisitor(surveyString, answers)
activate UI
deactivate UI

loop enquanto o questionário tiver questões
UI - -> C : apresenta a questão
deactivate UI
C -> UI : responde à questão
activate UI
end




UI -> CONTROLLER : sendAnswersToBeSaved(answers, surveyDTO)
activate CONTROLLER
CONTROLLER -> SERVICE : sendAnswersToBeSaved(answers, survey, email)
activate SERVICE
SERVICE -> ORDER_SERVER : sendAnswersToBeSaved(answers, survey, email)
activate ORDER_SERVER

ORDER_SERVER -> PARSER : parse(messageRequest, sOutputObject, sIn, sOut, clientMessageUS, sInputObject)
activate PARSER
PARSER -> ORDER_REQUEST : create(orderSrvController, messageRequest, sOutObject, sIn, sOut, clientMessageUS, sInObject)
activate ORDER_REQUEST
ORDER_REQUEST - -> PARSER : orderRequest
deactivate ORDER_REQUEST
PARSER - -> ORDER_SERVER : orderRequest
deactivate PARSER
|||
note right of ORDER_SERVER
request **14**
end note
ORDER_SERVER -> ORDER_REQUEST : execute()
activate ORDER_REQUEST

ORDER_REQUEST -> ORDER_CONTROLLER : saveQuestionnaireAnswers(answers, surveyDTO, email)
activate ORDER_CONTROLLER
ORDER_CONTROLLER -> SURVEY_REP : ofIdentity(surveyCode)
activate SURVEY_REP
SURVEY_REP - -> ORDER_CONTROLLER : survey
deactivate SURVEY_REP
ORDER_CONTROLLER -> CLIENT_REP : findByEmail(email)
activate CLIENT_REP
CLIENT_REP - -> ORDER_CONTROLLER : clientSurvey
deactivate CLIENT_REP
loop enquanto houver answers a persistir
ORDER_CONTROLLER -> ANSWER : create(survey, client, questionID, listAnswers)
activate ANSWER
ANSWER - -> ORDER_CONTROLLER : answer
deactivate ANSWER
ORDER_CONTROLLER -> ANSWER_REP : save(answer)
activate ANSWER_REP
deactivate ANSWER_REP


end

ORDER_CONTROLLER - -> ORDER_REQUEST : success
ORDER_REQUEST - -> ORDER_SERVER : success
ORDER_SERVER - -> SERVICE : success
SERVICE - -> CONTROLLER : success
CONTROLLER - -> UI : success


deactivate ORDER_CONTROLLER
deactivate ORDER_REQUEST
deactivate PARSER
deactivate ORDER_SERVER
deactivate SERVICE
deactivate CONTROLLER



UI - -> C : informa o sucesso da operação
deactivate UI



@enduml

PlantUML version 1.2021.4(Sun Apr 04 09:49:39 BST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>