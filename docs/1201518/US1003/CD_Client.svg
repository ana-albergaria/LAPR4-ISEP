<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="728px" preserveAspectRatio="none" style="width:603px;height:728px;" version="1.1" viewBox="0 0 603 728" width="603px" zoomAndPan="magnify"><defs><filter height="300%" id="febih78esv2c2" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[dfccfb5894388a46eaa5d679d3ea0882]
entity ClientRepository--><path d="M47.42,685 C47.42,675 109.42,675 109.42,675 C109.42,675 171.42,675 171.42,685 L171.42,711.6094 C171.42,721.6094 109.42,721.6094 109.42,721.6094 C109.42,721.6094 47.42,721.6094 47.42,711.6094 L47.42,685 " fill="#FFFFFF" filter="url(#febih78esv2c2)" style="stroke:#000000;stroke-width:1.5;"/><path d="M47.42,685 C47.42,695 109.42,695 109.42,695 C109.42,695 171.42,695 171.42,685 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104" x="57.42" y="713.5332">ClientRepository</text><!--MD5=[71152100d89f377ebd8dc97f1c2b0d02]
class RegisterClientUI--><rect codeLine="1" fill="#FEFECE" filter="url(#febih78esv2c2)" height="48" id="RegisterClientUI" style="stroke:#A80036;stroke-width:1.5;" width="123" x="200.92" y="7"/><ellipse cx="215.92" cy="23" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M217.92,19.5 Q218.1231,19 218.3575,18.75 Q218.5919,18.5 218.8575,18.5 Q219.3263,18.5 219.6231,18.7813 Q219.92,19.0625 219.92,19.7188 L219.92,21.2813 Q219.92,21.9375 219.6388,22.2188 Q219.3575,22.5 218.92,22.5 Q218.5294,22.5 218.2794,22.3281 Q218.0294,22.1563 217.92,21.7031 Q217.8731,21.3906 217.7013,21.2188 Q217.3888,20.8906 216.8263,20.7031 Q216.2638,20.5 215.7013,20.5 Q214.9981,20.5 214.4044,20.7813 Q213.8263,21.0625 213.3731,21.6875 Q212.92,22.3125 212.92,23.1719 L212.92,24.0938 Q212.92,25.125 213.7638,25.8125 Q214.6075,26.5 216.1075,26.5 Q216.9981,26.5 217.6231,26.2969 Q217.9825,26.1875 218.3888,25.8281 Q218.6544,25.625 218.795,25.5625 Q218.9356,25.5 219.1075,25.5 Q219.4356,25.5 219.67,25.7656 Q219.92,26.0156 219.92,26.375 Q219.92,26.7188 219.5763,27.125 Q219.0763,27.7188 218.2794,28.0469 Q217.2325,28.5 215.9513,28.5 Q214.4513,28.5 213.2481,27.9063 Q212.2794,27.4375 211.5919,26.4219 Q210.92,25.4063 210.92,24.2031 L210.92,23.1094 Q210.92,21.8594 211.5138,20.7656 Q212.1231,19.6719 213.17,19.0938 Q214.2325,18.5 215.42,18.5 Q216.1388,18.5 216.7638,18.75 Q217.3888,19 217.92,19.5 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="91" x="229.92" y="27.9102">RegisterClientUI</text><line style="stroke:#A80036;stroke-width:1.5;" x1="201.92" x2="322.92" y1="39" y2="39"/><line style="stroke:#A80036;stroke-width:1.5;" x1="201.92" x2="322.92" y1="47" y2="47"/><!--MD5=[1a7fda4a36185bcd740bdf14b2b3a45e]
class RegisterClientController--><rect codeLine="4" fill="#FEFECE" filter="url(#febih78esv2c2)" height="75.6719" id="RegisterClientController" style="stroke:#A80036;stroke-width:1.5;" width="493" x="15.92" y="115"/><ellipse cx="191.67" cy="131" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M193.67,127.5 Q193.8731,127 194.1075,126.75 Q194.3419,126.5 194.6075,126.5 Q195.0763,126.5 195.3731,126.7813 Q195.67,127.0625 195.67,127.7188 L195.67,129.2813 Q195.67,129.9375 195.3888,130.2188 Q195.1075,130.5 194.67,130.5 Q194.2794,130.5 194.0294,130.3281 Q193.7794,130.1563 193.67,129.7031 Q193.6231,129.3906 193.4513,129.2188 Q193.1388,128.8906 192.5763,128.7031 Q192.0138,128.5 191.4513,128.5 Q190.7481,128.5 190.1544,128.7813 Q189.5763,129.0625 189.1231,129.6875 Q188.67,130.3125 188.67,131.1719 L188.67,132.0938 Q188.67,133.125 189.5138,133.8125 Q190.3575,134.5 191.8575,134.5 Q192.7481,134.5 193.3731,134.2969 Q193.7325,134.1875 194.1388,133.8281 Q194.4044,133.625 194.545,133.5625 Q194.6856,133.5 194.8575,133.5 Q195.1856,133.5 195.42,133.7656 Q195.67,134.0156 195.67,134.375 Q195.67,134.7188 195.3263,135.125 Q194.8263,135.7188 194.0294,136.0469 Q192.9825,136.5 191.7013,136.5 Q190.2013,136.5 188.9981,135.9063 Q188.0294,135.4375 187.3419,134.4219 Q186.67,133.4063 186.67,132.2031 L186.67,131.1094 Q186.67,129.8594 187.2638,128.7656 Q187.8731,127.6719 188.92,127.0938 Q189.9825,126.5 191.17,126.5 Q191.8888,126.5 192.5138,126.75 Q193.1388,127 193.67,127.5 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="133" x="212.17" y="135.9102">RegisterClientController</text><line style="stroke:#A80036;stroke-width:1.5;" x1="16.92" x2="507.92" y1="147" y2="147"/><line style="stroke:#A80036;stroke-width:1.5;" x1="16.92" x2="507.92" y1="155" y2="155"/><ellipse cx="26.92" cy="166" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="39" x="35.92" y="170.4189">create()</text><ellipse cx="26.92" cy="179.8359" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="467" x="35.92" y="184.2549">registerClient(firstnames, surnames, email, phoneNumber,vat, postalAddress, birthDate, gender)}</text><!--MD5=[e8c189551b7885b999ad7cefb30fc2a3]
class PersistenceContext--><rect codeLine="10" fill="#FEFECE" filter="url(#febih78esv2c2)" height="61.8359" id="PersistenceContext" style="stroke:#A80036;stroke-width:1.5;" width="139" x="109.92" y="327"/><ellipse cx="124.92" cy="343" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M126.92,339.5 Q127.1231,339 127.3575,338.75 Q127.5919,338.5 127.8575,338.5 Q128.3263,338.5 128.6231,338.7813 Q128.92,339.0625 128.92,339.7188 L128.92,341.2813 Q128.92,341.9375 128.6388,342.2188 Q128.3575,342.5 127.92,342.5 Q127.5294,342.5 127.2794,342.3281 Q127.0294,342.1563 126.92,341.7031 Q126.8731,341.3906 126.7013,341.2188 Q126.3888,340.8906 125.8263,340.7031 Q125.2638,340.5 124.7013,340.5 Q123.9981,340.5 123.4044,340.7813 Q122.8263,341.0625 122.3731,341.6875 Q121.92,342.3125 121.92,343.1719 L121.92,344.0938 Q121.92,345.125 122.7638,345.8125 Q123.6075,346.5 125.1075,346.5 Q125.9981,346.5 126.6231,346.2969 Q126.9825,346.1875 127.3888,345.8281 Q127.6544,345.625 127.795,345.5625 Q127.9356,345.5 128.1075,345.5 Q128.4356,345.5 128.67,345.7656 Q128.92,346.0156 128.92,346.375 Q128.92,346.7188 128.5763,347.125 Q128.0763,347.7188 127.2794,348.0469 Q126.2325,348.5 124.9513,348.5 Q123.4513,348.5 122.2481,347.9063 Q121.2794,347.4375 120.5919,346.4219 Q119.92,345.4063 119.92,344.2031 L119.92,343.1094 Q119.92,341.8594 120.5138,340.7656 Q121.1231,339.6719 122.17,339.0938 Q123.2325,338.5 124.42,338.5 Q125.1388,338.5 125.7638,338.75 Q126.3888,339 126.92,339.5 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="107" x="138.92" y="347.9102">PersistenceContext</text><line style="stroke:#A80036;stroke-width:1.5;" x1="110.92" x2="247.92" y1="359" y2="359"/><line style="stroke:#A80036;stroke-width:1.5;" x1="110.92" x2="247.92" y1="367" y2="367"/><ellipse cx="120.92" cy="378" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="65" x="129.92" y="382.4189">repositories()</text><!--MD5=[48590afff58a68e2fcba47824d6f8a11]
class RepositoryFactory--><rect codeLine="14" fill="#FEFECE" filter="url(#febih78esv2c2)" height="89.5078" id="RepositoryFactory" style="stroke:#A80036;stroke-width:1.5;" width="185" x="89.92" y="525"/><ellipse cx="129.67" cy="541" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M131.67,537.5 Q131.8731,537 132.1075,536.75 Q132.3419,536.5 132.6075,536.5 Q133.0763,536.5 133.3731,536.7813 Q133.67,537.0625 133.67,537.7188 L133.67,539.2813 Q133.67,539.9375 133.3888,540.2188 Q133.1075,540.5 132.67,540.5 Q132.2794,540.5 132.0294,540.3281 Q131.7794,540.1563 131.67,539.7031 Q131.6231,539.3906 131.4513,539.2188 Q131.1388,538.8906 130.5763,538.7031 Q130.0138,538.5 129.4513,538.5 Q128.7481,538.5 128.1544,538.7813 Q127.5763,539.0625 127.1231,539.6875 Q126.67,540.3125 126.67,541.1719 L126.67,542.0938 Q126.67,543.125 127.5138,543.8125 Q128.3575,544.5 129.8575,544.5 Q130.7481,544.5 131.3731,544.2969 Q131.7325,544.1875 132.1388,543.8281 Q132.4044,543.625 132.545,543.5625 Q132.6856,543.5 132.8575,543.5 Q133.1856,543.5 133.42,543.7656 Q133.67,544.0156 133.67,544.375 Q133.67,544.7188 133.3263,545.125 Q132.8263,545.7188 132.0294,546.0469 Q130.9825,546.5 129.7013,546.5 Q128.2013,546.5 126.9981,545.9063 Q126.0294,545.4375 125.3419,544.4219 Q124.67,543.4063 124.67,542.2031 L124.67,541.1094 Q124.67,539.8594 125.2638,538.7656 Q125.8731,537.6719 126.92,537.0938 Q127.9825,536.5 129.17,536.5 Q129.8888,536.5 130.5138,536.75 Q131.1388,537 131.67,537.5 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="98" x="149.17" y="545.9102">RepositoryFactory</text><line style="stroke:#A80036;stroke-width:1.5;" x1="90.92" x2="273.92" y1="557" y2="557"/><line style="stroke:#A80036;stroke-width:1.5;" x1="90.92" x2="273.92" y1="565" y2="565"/><ellipse cx="100.92" cy="576" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="39" x="109.92" y="580.4189">create()</text><ellipse cx="100.92" cy="589.8359" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="132" x="109.92" y="594.2549">newTransactionalContext()</text><ellipse cx="100.92" cy="603.6719" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="159" x="109.92" y="608.0908">create(TransactionalContext ctx)</text><!--MD5=[ed6624c6556d5e7b1bd23032162d20b7]
class Client--><rect codeLine="23" fill="#FEFECE" filter="url(#febih78esv2c2)" height="61.8359" id="Client" style="stroke:#A80036;stroke-width:1.5;" width="65" x="312.92" y="539"/><ellipse cx="328.37" cy="555" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M330.37,551.5 Q330.5731,551 330.8075,550.75 Q331.0419,550.5 331.3075,550.5 Q331.7763,550.5 332.0731,550.7813 Q332.37,551.0625 332.37,551.7188 L332.37,553.2813 Q332.37,553.9375 332.0888,554.2188 Q331.8075,554.5 331.37,554.5 Q330.9794,554.5 330.7294,554.3281 Q330.4794,554.1563 330.37,553.7031 Q330.3231,553.3906 330.1513,553.2188 Q329.8388,552.8906 329.2763,552.7031 Q328.7138,552.5 328.1513,552.5 Q327.4481,552.5 326.8544,552.7813 Q326.2763,553.0625 325.8231,553.6875 Q325.37,554.3125 325.37,555.1719 L325.37,556.0938 Q325.37,557.125 326.2138,557.8125 Q327.0575,558.5 328.5575,558.5 Q329.4481,558.5 330.0731,558.2969 Q330.4325,558.1875 330.8388,557.8281 Q331.1044,557.625 331.245,557.5625 Q331.3856,557.5 331.5575,557.5 Q331.8856,557.5 332.12,557.7656 Q332.37,558.0156 332.37,558.375 Q332.37,558.7188 332.0263,559.125 Q331.5263,559.7188 330.7294,560.0469 Q329.6825,560.5 328.4013,560.5 Q326.9013,560.5 325.6981,559.9063 Q324.7294,559.4375 324.0419,558.4219 Q323.37,557.4063 323.37,556.2031 L323.37,555.1094 Q323.37,553.8594 323.9638,552.7656 Q324.5731,551.6719 325.62,551.0938 Q326.6825,550.5 327.87,550.5 Q328.5888,550.5 329.2138,550.75 Q329.8388,551 330.37,551.5 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="32" x="342.47" y="559.9102">Client</text><line style="stroke:#A80036;stroke-width:1.5;" x1="313.92" x2="376.92" y1="571" y2="571"/><line style="stroke:#A80036;stroke-width:1.5;" x1="313.92" x2="376.92" y1="579" y2="579"/><ellipse cx="323.92" cy="590" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="39" x="332.92" y="594.4189">create()</text><!--MD5=[9f4370a08c17b73d6022f342818566e2]
class ClientBuilder--><rect codeLine="27" fill="#FEFECE" filter="url(#febih78esv2c2)" height="214.0313" id="ClientBuilder" style="stroke:#A80036;stroke-width:1.5;" width="122" x="284.42" y="251"/><ellipse cx="307.97" cy="267" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M309.97,263.5 Q310.1731,263 310.4075,262.75 Q310.6419,262.5 310.9075,262.5 Q311.3763,262.5 311.6731,262.7813 Q311.97,263.0625 311.97,263.7188 L311.97,265.2813 Q311.97,265.9375 311.6888,266.2188 Q311.4075,266.5 310.97,266.5 Q310.5794,266.5 310.3294,266.3281 Q310.0794,266.1563 309.97,265.7031 Q309.9231,265.3906 309.7513,265.2188 Q309.4388,264.8906 308.8763,264.7031 Q308.3138,264.5 307.7513,264.5 Q307.0481,264.5 306.4544,264.7813 Q305.8763,265.0625 305.4231,265.6875 Q304.97,266.3125 304.97,267.1719 L304.97,268.0938 Q304.97,269.125 305.8138,269.8125 Q306.6575,270.5 308.1575,270.5 Q309.0481,270.5 309.6731,270.2969 Q310.0325,270.1875 310.4388,269.8281 Q310.7044,269.625 310.845,269.5625 Q310.9856,269.5 311.1575,269.5 Q311.4856,269.5 311.72,269.7656 Q311.97,270.0156 311.97,270.375 Q311.97,270.7188 311.6263,271.125 Q311.1263,271.7188 310.3294,272.0469 Q309.2825,272.5 308.0013,272.5 Q306.5013,272.5 305.2981,271.9063 Q304.3294,271.4375 303.6419,270.4219 Q302.97,269.4063 302.97,268.2031 L302.97,267.1094 Q302.97,265.8594 303.5638,264.7656 Q304.1731,263.6719 305.22,263.0938 Q306.2825,262.5 307.47,262.5 Q308.1888,262.5 308.8138,262.75 Q309.4388,263 309.97,263.5 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="71" x="323.87" y="271.9102">ClientBuilder</text><line style="stroke:#A80036;stroke-width:1.5;" x1="285.42" x2="405.42" y1="283" y2="283"/><line style="stroke:#A80036;stroke-width:1.5;" x1="285.42" x2="405.42" y1="291" y2="291"/><ellipse cx="295.42" cy="302" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="39" x="304.42" y="306.4189">create()</text><ellipse cx="295.42" cy="315.8359" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="65" x="304.42" y="320.2549">createClient()</text><ellipse cx="295.42" cy="329.6719" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="51" x="304.42" y="334.0908">withVAT()</text><ellipse cx="295.42" cy="343.5078" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="53" x="304.42" y="347.9268">withEmail()</text><ellipse cx="295.42" cy="357.3438" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="96" x="304.42" y="361.7627">withPhoneNumber()</text><ellipse cx="295.42" cy="371.1797" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="40" x="304.42" y="375.5986">named()</text><ellipse cx="295.42" cy="385.0156" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="83" x="304.42" y="389.4346">withAddresses()</text><ellipse cx="295.42" cy="398.8516" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="71" x="304.42" y="403.2705">withAddress()</text><ellipse cx="295.42" cy="412.6875" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="74" x="304.42" y="417.1064">buildOrThrow()</text><ellipse cx="295.42" cy="426.5234" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="73" x="304.42" y="430.9424">withBirthDate()</text><ellipse cx="295.42" cy="440.3594" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="65" x="304.42" y="444.7783">withGender()</text><ellipse cx="295.42" cy="454.1953" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="30" x="304.42" y="458.6143">build()</text><!--MD5=[288bffab58163169a8d16c57b889bc0c]
class TransactionalContext--><rect codeLine="42" fill="#FEFECE" filter="url(#febih78esv2c2)" height="75.6719" id="TransactionalContext" style="stroke:#A80036;stroke-width:1.5;" width="148" x="441.42" y="320"/><ellipse cx="456.42" cy="336" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M458.42,332.5 Q458.6231,332 458.8575,331.75 Q459.0919,331.5 459.3575,331.5 Q459.8263,331.5 460.1231,331.7813 Q460.42,332.0625 460.42,332.7188 L460.42,334.2813 Q460.42,334.9375 460.1388,335.2188 Q459.8575,335.5 459.42,335.5 Q459.0294,335.5 458.7794,335.3281 Q458.5294,335.1563 458.42,334.7031 Q458.3731,334.3906 458.2013,334.2188 Q457.8888,333.8906 457.3263,333.7031 Q456.7638,333.5 456.2013,333.5 Q455.4981,333.5 454.9044,333.7813 Q454.3263,334.0625 453.8731,334.6875 Q453.42,335.3125 453.42,336.1719 L453.42,337.0938 Q453.42,338.125 454.2638,338.8125 Q455.1075,339.5 456.6075,339.5 Q457.4981,339.5 458.1231,339.2969 Q458.4825,339.1875 458.8888,338.8281 Q459.1544,338.625 459.295,338.5625 Q459.4356,338.5 459.6075,338.5 Q459.9356,338.5 460.17,338.7656 Q460.42,339.0156 460.42,339.375 Q460.42,339.7188 460.0763,340.125 Q459.5763,340.7188 458.7794,341.0469 Q457.7325,341.5 456.4513,341.5 Q454.9513,341.5 453.7481,340.9063 Q452.7794,340.4375 452.0919,339.4219 Q451.42,338.4063 451.42,337.2031 L451.42,336.1094 Q451.42,334.8594 452.0138,333.7656 Q452.6231,332.6719 453.67,332.0938 Q454.7325,331.5 455.92,331.5 Q456.6388,331.5 457.2638,331.75 Q457.8888,332 458.42,332.5 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="116" x="470.42" y="340.9102">TransactionalContext</text><line style="stroke:#A80036;stroke-width:1.5;" x1="442.42" x2="588.42" y1="352" y2="352"/><line style="stroke:#A80036;stroke-width:1.5;" x1="442.42" x2="588.42" y1="360" y2="360"/><ellipse cx="452.42" cy="371" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="91" x="461.42" y="375.4189">beginTransaction()</text><ellipse cx="452.42" cy="384.8359" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="41" x="461.42" y="389.2549">commit()</text><!--MD5=[98d2d934d445daef8d5bcbeea20c1f70]
link RegisterClientUI to RegisterClientController--><path codeLine="48" d="M262.42,55.14 C262.42,70.58 262.42,91.33 262.42,109.67 " fill="none" id="RegisterClientUI-to-RegisterClientController" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="262.42,114.77,266.42,105.77,262.42,109.77,258.42,105.77,262.42,114.77" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[5081d4e448db8b8cb1d0ca0a7becc4bf]
link RegisterClientController to ClientBuilder--><path codeLine="50" d="M277.64,191.23 C284.1,207.02 292,226.34 300.09,246.13 " fill="none" id="RegisterClientController-to-ClientBuilder" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="302.04,250.9,302.3487,241.056,300.1535,246.2695,294.94,244.0744,302.04,250.9" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[e8079491a6e8ae6a03c4a3346b264e99]
link RegisterClientController to PersistenceContext--><path codeLine="51" d="M247.2,191.23 C231.92,228.59 208.58,285.67 193.67,322.15 " fill="none" id="RegisterClientController-to-PersistenceContext" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="191.71,326.94,198.8281,320.1332,193.6087,322.3145,191.4273,317.0952,191.71,326.94" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[5c0e0e5c4aeb1089221a7a8f0f2aad6a]
link RegisterClientController to TransactionalContext--><path codeLine="52" d="M334.59,191.03 C363.58,207.51 396.44,228.32 423.42,251 C446.06,270.04 467.92,294.86 484.65,315.7 " fill="none" id="RegisterClientController-to-TransactionalContext" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="487.92,319.81,485.4297,310.2812,484.8,315.9029,479.1783,315.2731,487.92,319.81" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[a0584be5259757c605c5c63f81a157d7]
link RegisterClientController to ClientRepository--><path codeLine="53" d="M160.81,191.08 C134.3,205.68 108.64,225.27 92.42,251 C6,388.05 38.52,456.56 72.42,615 C76.56,634.34 85.58,654.62 93.68,670.23 " fill="none" id="RegisterClientController-to-ClientRepository" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="96.16,674.92,95.4988,665.0934,93.8271,670.4976,88.4229,668.8259,96.16,674.92" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[8c440798e6cc41a7fca2b3bfdfdce304]
link ClientBuilder to Client--><path codeLine="55" d="M345.42,465.23 C345.42,489.97 345.42,514.61 345.42,533.67 " fill="none" id="ClientBuilder-to-Client" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="345.42,538.89,349.42,529.89,345.42,533.89,341.42,529.89,345.42,538.89" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[754b775031405e096442b27febffa290]
link PersistenceContext to RepositoryFactory--><path codeLine="57" d="M179.85,389.09 C180.34,423.06 181.13,478.86 181.71,519.33 " fill="none" id="PersistenceContext-to-RepositoryFactory" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="181.79,524.68,185.661,515.6238,181.7186,519.6805,177.6618,515.7381,181.79,524.68" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[7e98ba641e2771e3efc9b333390cc0aa]
link RepositoryFactory to ClientRepository--><path codeLine="59" d="M156.89,615.24 C146.29,633.61 134.33,654.33 125.07,670.38 " fill="none" id="RepositoryFactory-to-ClientRepository" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="122.53,674.78,130.4867,668.9757,125.0245,670.4467,123.5535,664.9845,122.53,674.78" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[4d8ea3da15c069e821f3935e85dbc5f2]
@startuml
class RegisterClientUI{
}

class RegisterClientController{
+create()
+registerClient(firstnames, surnames, email, phoneNumber,vat, postalAddress, birthDate, gender)}
}


class PersistenceContext{
+repositories()
}

class RepositoryFactory{
+create()
+newTransactionalContext()
+create(TransactionalContext ctx)
}

database ClientRepository{
}

class Client{
+create()
}

class ClientBuilder{
+create()
+createClient()
+withVAT()
+withEmail()
+withPhoneNumber()
+named()
+withAddresses()
+withAddress()
+buildOrThrow()
+withBirthDate()
+withGender()
+build()
}

class TransactionalContext{
+beginTransaction()
+commit()
}


RegisterClientUI - -> RegisterClientController

RegisterClientController- ->ClientBuilder
RegisterClientController - ->PersistenceContext
RegisterClientController - ->TransactionalContext
RegisterClientController- ->ClientRepository

ClientBuilder - -> Client

PersistenceContext - ->RepositoryFactory

RepositoryFactory - ->ClientRepository

@enduml

PlantUML version 1.2021.4(Sun Apr 04 09:49:39 BST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>